<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Adam Cook</title>
        <link>https://adamcook.io/</link>
        <description>Recent content on Adam Cook</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>en-us</language>
        <lastBuildDate>Sat, 17 Oct 2020 00:00:00 +0100</lastBuildDate><atom:link href="https://adamcook.io/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>Getting Your Powershell Code Into Production Using Github Actions</title>
        <link>https://adamcook.io/p/getting-your-powershell-code-into-production-using-github-actions/</link>
        <pubDate>Sat, 17 Oct 2020 00:00:00 +0100</pubDate>
        
        <guid>https://adamcook.io/p/getting-your-powershell-code-into-production-using-github-actions/</guid>
        <description>&lt;img src="https://adamcook.io/p/getting-your-powershell-code-into-production-using-github-actions/images/Getting-Your-PowerShell-Code-Into-Production-Using-GitHub-Actions-00.jpg" alt="Featured image of post Getting Your Powershell Code Into Production Using Github Actions" /&gt;&lt;p&gt;Earlier in the week I presented at a &lt;a class=&#34;link&#34; href=&#34;https://winadmins.io&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;WinAdmins&lt;/a&gt; virtual user group session. At the bottom of this post you can watch the recording.&lt;/p&gt;
&lt;p&gt;The session covered the below topics:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Introduction to CI/CD pipeline, i.e. what it means with practical explanations&lt;/li&gt;
&lt;li&gt;A walk through on the YAML structure/syntax of GitHub Actions&lt;/li&gt;
&lt;li&gt;Demonstrate on how to use Actions by uploading content to Azure Blob storage&lt;/li&gt;
&lt;li&gt;Demonstrate a self hosted runner&lt;/li&gt;
&lt;li&gt;Demonstrate how to deploy a PowerShell module to: the PowerShell Gallery, create a new GitHub release, a shared folder within my home lab (which failed because I messed with the runner&amp;rsquo;s service log-on credential) and to a self hosted NuGet feed (which also failed, thanks demo gods)&lt;/li&gt;
&lt;/ul&gt;

&lt;div style=&#34;position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;&#34;&gt;
  &lt;iframe loading=&#34;lazy&#34; src=&#34;https://www.youtube.com/embed/RDQkqxrJUeU&#34; style=&#34;position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;&#34; allowfullscreen title=&#34;YouTube Video&#34;&gt;&lt;/iframe&gt;
&lt;/div&gt;

</description>
        </item>
        <item>
        <title>Deploying Hugo Websites in Azure for Pennies or Free on GitHub Pages</title>
        <link>https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/</link>
        <pubDate>Mon, 05 Oct 2020 21:04:10 +0100</pubDate>
        
        <guid>https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/</guid>
        <description>&lt;img src="https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/cover.jpg" alt="Featured image of post Deploying Hugo Websites in Azure for Pennies or Free on GitHub Pages" /&gt;&lt;p&gt;I recently migrated my WordPress blogging platform to generating static content with Hugo. I no longer pay for hosting. I exclusively use GitHub Pages. I am now blogging at no extra cost other than domain renewal!&lt;/p&gt;
&lt;p&gt;In the process not only did I learn about Hugo, but I also looked at three ways to deploy / host my Hugo-made website.&lt;/p&gt;
&lt;p&gt;In this post I want to share with you what Hugo is, why I like it and those three ways that I learned on how to deploy a Hugo website - with Azure Static Web Apps (preview), Azure Blob storage and GitHub Pages.&lt;/p&gt;
&lt;p&gt;For Azure Static Web Apps and Blob storage, I will be using Cloudflare. I am also assuming you will be using your own domain name. It is not a big deal if you do not want to, just ignore details focused on defining custom domains and creating CNAME records.&lt;/p&gt;
&lt;p&gt;There will also be some assumptions that you are somewhat familiar with using GitHub Actions. If you are looking for an introduction to using GitHub Actions, check out my &lt;a class=&#34;link&#34; href=&#34;https://adamcook.io/p/getting-your-powershell-code-into-production-using-github-actions/&#34; &gt;WinAdmins virtual user group event session&lt;/a&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#what-is-this-hugo-thing&#34; &gt;What is this Hugo thing?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#prerequisites&#34; &gt;Prerequisites&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#azure-static-web-apps&#34; &gt;Azure Static Web Apps&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#azure-blob-storage&#34; &gt;Azure Blob storage&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#github-pages&#34; &gt;GitHub Pages&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;#closing-comments&#34; &gt;Closing comments&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;what-is-this-hugo-thing&#34;&gt;What is this Hugo thing?&lt;/h2&gt;
&lt;p&gt;Hugo is a static site generator.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;continues to stare blankly at the screen&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Yeah, I did too.&lt;/p&gt;
&lt;p&gt;With static site generators (like Hugo), you forego caring about databases and any kind of code. Instead, your HTML pages are generated either each time a user visits your website, or in Hugo&amp;rsquo;s case, the HTML pages are generated each time you create or update content.&lt;/p&gt;
&lt;p&gt;Instead of writing your pages and blog posts in HTML files or in a feature-rich WYSIWYG editor, on some bloated content management system like WordPress, you write them in markdown (at least you do with Hugo). Then you invoke the process to generate the HTML files, using your new markdown content as source. The generated HTML files land in a very particular directory (&lt;code&gt;public&lt;/code&gt;). After that, all you need to do is get that directory on a web hosting platform as your web root.&lt;/p&gt;
&lt;p&gt;When it comes to styling, themes are mostly plug and play, too. Fancy a new theme? No problem. &lt;a class=&#34;link&#34; href=&#34;https://themes.gohugo.io/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Download one&lt;/a&gt;, drop it in the &lt;code&gt;/themes&lt;/code&gt; directory amd update &lt;code&gt;config.toml&lt;/code&gt; a little.&lt;/p&gt;
&lt;p&gt;With static websites, no runtime is needed to run your website. Not only does this open up your hosting opportunities, performance is also another great benefit. You do not need a hosting package that sit on nginx or Apache, running PHP or whatever. For example, you can host on &lt;a class=&#34;link&#34; href=&#34;https://azure.microsoft.com/en-gb/services/storage/Blobs/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Azure Blob storage&lt;/a&gt; or &lt;a class=&#34;link&#34; href=&#34;https://pages.github.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;GitHub Pages&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;GitHub Pages is free. It also lets you use your own domain and offers free SSL certificates via LetsEncrypt. Azure Blob Storage isn&amp;rsquo;t quite free but it costs pennies. It is Â£0.0144 per GB (in UK South) of storage and the first 5GB of bandwidth from this zone is free. You can do this on many more platforms too, such as Amazon S3, Netlify, Heroku, GitLab Pages, Google Cloud Storage and more.&lt;/p&gt;
&lt;p&gt;I am all-for ditching WordPress. Over the last few years I have grown more comfortable with Git and working on Azure and GitHub. If you relate to that or are enticed by any of the benefits, I highly recommend you at least give it a go! I would be more than happy to help, too, just get hold of me.&lt;/p&gt;
&lt;p&gt;Here are some resources I used to learn Hugo:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.youtube.com/watch?v=qtIqKaDlqXo&amp;amp;list=PLLAZ4kZ9dFpOnyRlyS-liKL5ReHDcj4G3&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Hugo - Static Site Generator | Tutorial&lt;/a&gt; YouTube series&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://gohugo.io/getting-started/quick-start/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Hugo Quick Start&lt;/a&gt; official documentation&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;prerequisites&#34;&gt;Prerequisites&lt;/h2&gt;
&lt;p&gt;Before we get started, I am going to assume some things:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;You have an Azure subscription&lt;/li&gt;
&lt;li&gt;You have a GitHub account and repository&lt;/li&gt;
&lt;li&gt;The repository contains either only your static site content, or the whole Hugo directory with your latest generated content in the &lt;code&gt;public&lt;/code&gt; directory&lt;/li&gt;
&lt;li&gt;You get by with Git enough to be able to do things like committing/pushing&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;azure-static-web-apps&#34;&gt;Azure Static Web Apps&lt;/h2&gt;
&lt;p&gt;Let us start with deploying Hugo to an Azure Static Web App. &lt;a class=&#34;link&#34; href=&#34;https://techcommunity.microsoft.com/t5/apps-on-azure/introducing-app-service-static-web-apps/ba-p/1394451&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Earlier this year Microsoft announced Azure Static Web Apps&lt;/a&gt; and it&amp;rsquo;s currently in preview. While it&amp;rsquo;s in preview, this resource is free!&lt;/p&gt;
&lt;p&gt;It boasts &amp;ldquo;deep GitHub integration&amp;rdquo;, which is true. When you create the resource and associate a GitHub repository with it, it creates a GitHub Actions workflow YAML file in your repository. It also stores a secret in the repository. The secret is used by the workflow to authenticate to Azure. This workflow, when triggered by pushing to the master branch, ships everything in the &lt;code&gt;public&lt;/code&gt; directory up to the Azure Static Web App for you.&lt;/p&gt;
&lt;p&gt;The good thing about using Azure Static Web Apps is that you essentially get Azure Blob storage and Azure Functions bundled in to one resource. This enables you to leverage the speed and flexibility of static site generators, while still being able to implement some dynamic abilities in to your website by rolling your own API via Azure Functions.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Log in to the &lt;a class=&#34;link&#34; href=&#34;https://portal.azure.com&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Azure portal&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Create a new Static Web App resource&lt;/li&gt;
&lt;li&gt;Fill out the typical information ie resource group, name and region&lt;/li&gt;
&lt;li&gt;Sign in to GitHub&lt;/li&gt;
&lt;li&gt;Choose your organisation / user, repository and branch&lt;/li&gt;
&lt;li&gt;For the build details, ensure you choose &lt;code&gt;Hugo&lt;/code&gt; and that you have the &amp;ldquo;App artifact location&amp;rdquo; set to &lt;code&gt;public&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Finalise the resource creation via &lt;code&gt;Review + create&lt;/code&gt; and if validation succeeds, click &lt;code&gt;Create&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-01.jpg&#34; data-size=&#34;1355x782&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-01_huef68e5499686639eded21e238ca19ac4_60604_480x0_resize_q75_box.jpg 480w, https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-01_huef68e5499686639eded21e238ca19ac4_60604_1024x0_resize_q75_box.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-01.jpg&#34; width=&#34;1355&#34; height=&#34;782&#34; loading=&#34;lazy&#34;
				alt=&#34;Static Web App resource creation in Azure Portal&#34;&gt;
		&lt;/a&gt;
		
		&lt;figcaption&gt;Static Web App resource creation in Azure Portal&lt;/figcaption&gt;
		
	&lt;/figure&gt; &lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-02.jpg&#34; data-size=&#34;1920x1336&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-02_hu7c695f106d7069e463451d2ad9980f62_140124_480x0_resize_q75_box.jpg 480w, https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-02_hu7c695f106d7069e463451d2ad9980f62_140124_1024x0_resize_q75_box.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-02.jpg&#34; width=&#34;1920&#34; height=&#34;1336&#34; loading=&#34;lazy&#34;
				alt=&#34;Static Web App resource creation in Azure Portal&#34;&gt;
		&lt;/a&gt;
		
		&lt;figcaption&gt;Static Web App resource creation in Azure Portal&lt;/figcaption&gt;
		
	&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Once the Static Web App resource is provisioned you will notice it created the GitHub Actions workflow YAML file in your repository. We can see from looking in the workflow file that it is using the &lt;a class=&#34;link&#34; href=&#34;https://github.com/Azure/static-web-apps-deploy&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Azure/static-web-apps-deploy&lt;/a&gt; action. &lt;a class=&#34;link&#34; href=&#34;https://docs.microsoft.com/en-us/azure/static-web-apps/github-actions-workflow&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Here&amp;rsquo;s the link&lt;/a&gt; to the docs for said action.&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-03.jpg&#34; data-size=&#34;1461x759&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-03_hu4bc9b7cca5ad322bfd27609a7035dcab_68362_480x0_resize_q75_box.jpg 480w, https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-03_hu4bc9b7cca5ad322bfd27609a7035dcab_68362_1024x0_resize_q75_box.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-03.jpg&#34; width=&#34;1461&#34; height=&#34;759&#34; loading=&#34;lazy&#34;
				alt=&#34;Creation of GitHub Actions workflow file by Azure&#34;&gt;
		&lt;/a&gt;
		
		&lt;figcaption&gt;Creation of GitHub Actions workflow file by Azure&lt;/figcaption&gt;
		
	&lt;/figure&gt; &lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-04.jpg&#34; data-size=&#34;1149x1040&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-04_hucccb004310e54a0a52abdb29283eac54_68189_480x0_resize_q75_box.jpg 480w, https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-04_hucccb004310e54a0a52abdb29283eac54_68189_1024x0_resize_q75_box.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-04.jpg&#34; width=&#34;1149&#34; height=&#34;1040&#34; loading=&#34;lazy&#34;
				alt=&#34;Static Web Apps Deploy actions workflow file&#34;&gt;
		&lt;/a&gt;
		
		&lt;figcaption&gt;Static Web Apps Deploy actions workflow file&lt;/figcaption&gt;
		
	&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;At this point, you will be able to see your static website live available from a HTTPS endpoint.&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-05.jpg&#34; data-size=&#34;1347x796&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-05_hu07251bb2a0a18783554b85726ad821a5_72359_480x0_resize_q75_box.jpg 480w, https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-05_hu07251bb2a0a18783554b85726ad821a5_72359_1024x0_resize_q75_box.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-05.jpg&#34; width=&#34;1347&#34; height=&#34;796&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt; &lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-06.jpg&#34; data-size=&#34;1347x796&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-06_hu036db5a0fd2626900c29f94d277788a1_43289_480x0_resize_q75_box.jpg 480w, https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-06_hu036db5a0fd2626900c29f94d277788a1_43289_1024x0_resize_q75_box.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-06.jpg&#34; width=&#34;1347&#34; height=&#34;796&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt;&lt;/p&gt;
&lt;ol start=&#34;8&#34;&gt;
&lt;li&gt;To use your own domain, go to your DNS provider set a CNAME record for &lt;code&gt;www&lt;/code&gt;, or any subdomain you want, to your &lt;code&gt;azurestaticapps.net&lt;/code&gt; URL as shown in your portal.&lt;/li&gt;
&lt;li&gt;After that, configure the static web app resource to point to your domain.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-07.jpg&#34; data-size=&#34;1347x796&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-07_hu36c7c823f442b2dfc21dc0999ad1e7c7_72721_480x0_resize_q75_box.jpg 480w, https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-07_hu36c7c823f442b2dfc21dc0999ad1e7c7_72721_1024x0_resize_q75_box.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-07.jpg&#34; width=&#34;1347&#34; height=&#34;796&#34; loading=&#34;lazy&#34;
				alt=&#34;Creating a CNAME record in Cloudflare&#34;&gt;
		&lt;/a&gt;
		
		&lt;figcaption&gt;Creating a CNAME record in Cloudflare&lt;/figcaption&gt;
		
	&lt;/figure&gt; &lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-08.jpg&#34; data-size=&#34;1347x796&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-08_huf01b0a15de4e9a5a6ddfe266846e1f03_75865_480x0_resize_q75_box.jpg 480w, https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-08_huf01b0a15de4e9a5a6ddfe266846e1f03_75865_1024x0_resize_q75_box.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-08.jpg&#34; width=&#34;1347&#34; height=&#34;796&#34; loading=&#34;lazy&#34;
				alt=&#34;Add custom domain to the static web app resource&#34;&gt;
		&lt;/a&gt;
		
		&lt;figcaption&gt;Add custom domain to the static web app resource&lt;/figcaption&gt;
		
	&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Now your Hugo generated static website is deployed in Azure using Static Web Apps!&lt;/p&gt;
&lt;h2 id=&#34;azure-blob-storage&#34;&gt;Azure Blob storage&lt;/h2&gt;
&lt;p&gt;Moving on to hosting your Hugo website on Azure Blob storage instead.&lt;/p&gt;
&lt;p&gt;Now&amp;hellip; Azure Blob storage does not do everything Azure Static Web Apps does. There is a reasonable amount of configuration to do yourself. For example, the Blob storage account is not configured to be a static website by default. There is also no bundled Azure Functions resource to integrate your own API. If you want the same CI/CD experience as with Azure Static Web Apps, you must also roll your own workflow with GitHub Actions (or similar). But that is OK! Because I will share with you my GitHub Actions workflow!&lt;/p&gt;
&lt;p&gt;Why bother using it then? I guess while Static Web Apps are in preview, even though Microsoft will give you 30 days notice, they could start charging you an unpredictable rate to use it. Whereas Blob storage is a mature generally available service, its pricing model is known and it is very cost effective. Maybe you also have your own reasons to prefer Blob storage.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Log in to the &lt;a class=&#34;link&#34; href=&#34;https://portal.azure.com&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Azure portal&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Create a new Azure Storage account&lt;/li&gt;
&lt;li&gt;Fill out the necessary information and click the usual &lt;code&gt;Review + create&lt;/code&gt; and &lt;code&gt;Create&lt;/code&gt; after validation&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-09.jpg&#34; data-size=&#34;1347x796&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-09_hu8e02045dd7fb5b90e83e8f249857e484_62652_480x0_resize_q75_box.jpg 480w, https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-09_hu8e02045dd7fb5b90e83e8f249857e484_62652_1024x0_resize_q75_box.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-09.jpg&#34; width=&#34;1347&#34; height=&#34;796&#34; loading=&#34;lazy&#34;
				alt=&#34;Storage account creation in Azure Portal&#34;&gt;
		&lt;/a&gt;
		
		&lt;figcaption&gt;Storage account creation in Azure Portal&lt;/figcaption&gt;
		
	&lt;/figure&gt; &lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-10.jpg&#34; data-size=&#34;1347x1038&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-10_hu79c8dd91c5acc0a3b7025b8d45ccf7fe_97251_480x0_resize_q75_box.jpg 480w, https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-10_hu79c8dd91c5acc0a3b7025b8d45ccf7fe_97251_1024x0_resize_q75_box.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-10.jpg&#34; width=&#34;1347&#34; height=&#34;1038&#34; loading=&#34;lazy&#34;
				alt=&#34;Storage account creation in Azure Portal&#34;&gt;
		&lt;/a&gt;
		
		&lt;figcaption&gt;Storage account creation in Azure Portal&lt;/figcaption&gt;
		
	&lt;/figure&gt;&lt;/p&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;Within the &amp;ldquo;Static website&amp;rdquo; blade, enable the storage account to be a static website. Also define your index and error documents to be&lt;code&gt;index.html&lt;/code&gt; and &lt;code&gt;404.html&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Within the &amp;ldquo;Containers&amp;rdquo; blade, select the &lt;code&gt;$web&lt;/code&gt; container and from the top menu change its access level via the &amp;ldquo;Change access level&amp;rdquo; menu item. Set its access policy to &lt;code&gt;Container&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Within the &amp;ldquo;Custom domain&amp;rdquo; blade, enter your custom domain and copy the domain which ends with &lt;code&gt;z33.web.core.windows.net&lt;/code&gt;. This will be used used to configure your CNAME record. Before clicking Save for your new custom domain, you will need to create a CNAME record with your DNS provider.&lt;/li&gt;
&lt;li&gt;Head over to &lt;a class=&#34;link&#34; href=&#34;https://cloudfoare.com&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Cloudflare&lt;/a&gt; and configure a CNAME record pointing to the &lt;code&gt;z33.web.core.windows.net&lt;/code&gt; domain gathered from the last step.&lt;/li&gt;
&lt;li&gt;Wait a little bit (a couple of minutes?), then back in the &amp;ldquo;Custom domain&amp;rdquo; blade of the Azure portal, click Save and the domain should validate OK.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-11.jpg&#34; data-size=&#34;1263x767&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-11_hu090a302355deb929678accc689402a5f_78521_480x0_resize_q75_box.jpg 480w, https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-11_hu090a302355deb929678accc689402a5f_78521_1024x0_resize_q75_box.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-11.jpg&#34; width=&#34;1263&#34; height=&#34;767&#34; loading=&#34;lazy&#34;
				alt=&#34;Enable the storage account to be a static website&#34;&gt;
		&lt;/a&gt;
		
		&lt;figcaption&gt;Enable the storage account to be a static website&lt;/figcaption&gt;
		
	&lt;/figure&gt; &lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-12.jpg&#34; data-size=&#34;1263x767&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-12_hu2d7ff0fa065962dec3854ffea804ecf3_63859_480x0_resize_q75_box.jpg 480w, https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-12_hu2d7ff0fa065962dec3854ffea804ecf3_63859_1024x0_resize_q75_box.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-12.jpg&#34; width=&#34;1263&#34; height=&#34;767&#34; loading=&#34;lazy&#34;
				alt=&#34;Change the $web container access policy to Container&#34;&gt;
		&lt;/a&gt;
		
		&lt;figcaption&gt;Change the $web container access policy to Container&lt;/figcaption&gt;
		
	&lt;/figure&gt;
&lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-14.jpg&#34; data-size=&#34;1263x767&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-14_hu090a302355deb929678accc689402a5f_89995_480x0_resize_q75_box.jpg 480w, https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-14_hu090a302355deb929678accc689402a5f_89995_1024x0_resize_q75_box.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-14.jpg&#34; width=&#34;1263&#34; height=&#34;767&#34; loading=&#34;lazy&#34;
				alt=&#34;Enter your custom domain&#34;&gt;
		&lt;/a&gt;
		
		&lt;figcaption&gt;Enter your custom domain&lt;/figcaption&gt;
		
	&lt;/figure&gt; &lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-15.jpg&#34; data-size=&#34;1444x857&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-15_hu980c2ad6e5b7f99e41bdc9c42a04417c_81683_480x0_resize_q75_box.jpg 480w, https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-15_hu980c2ad6e5b7f99e41bdc9c42a04417c_81683_1024x0_resize_q75_box.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-15.jpg&#34; width=&#34;1444&#34; height=&#34;857&#34; loading=&#34;lazy&#34;
				alt=&#34;Creating a CNAME record in Cloudflare&#34;&gt;
		&lt;/a&gt;
		
		&lt;figcaption&gt;Creating a CNAME record in Cloudflare&lt;/figcaption&gt;
		
	&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;At this point, all there is left to do is to upload some content to your new Blob storage &lt;code&gt;$web&lt;/code&gt; container.&lt;/p&gt;
&lt;p&gt;As a mess-around, create a file named &lt;code&gt;index.html&lt;/code&gt; locally with some simple HTML in it which we&amp;rsquo;ll use for testing shortly. Install &lt;a class=&#34;link&#34; href=&#34;https://azure.microsoft.com/en-us/features/storage-explorer/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Azure Storage Explorer&lt;/a&gt; and sign in with your Azure AD account with the subscription that holds your new storage account.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;html&lt;/span&gt;&amp;gt;
    &amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;body&lt;/span&gt;&amp;gt;
        &amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;h1&lt;/span&gt;&amp;gt;Hello world&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;h1&lt;/span&gt;&amp;gt;
    &amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;body&lt;/span&gt;&amp;gt;
&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;html&lt;/span&gt;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Upload &lt;code&gt;index.html&lt;/code&gt; to the &lt;code&gt;$web&lt;/code&gt; container and check it out! It&amp;rsquo;s worth pointing out that the &lt;a class=&#34;link&#34; href=&#34;https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-azurestorage&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Azure Storage Visual Studio Code extension&lt;/a&gt; lets you modify files directly in your Blob container.&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-16.gif&#34; data-size=&#34;1736x769&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-16_hua7f857b9f70ef40cf1a2b25db3d8bc35_560377_480x0_resize_box.gif 480w, https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-16_hua7f857b9f70ef40cf1a2b25db3d8bc35_560377_1024x0_resize_box.gif 1024w&#34;
				src=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-16.gif&#34; width=&#34;1736&#34; height=&#34;769&#34; loading=&#34;lazy&#34;
				alt=&#34;Click me to see animation&#34;&gt;
		&lt;/a&gt;
		
		&lt;figcaption&gt;Click me to see animation&lt;/figcaption&gt;
		
	&lt;/figure&gt; &lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-17.jpg&#34; data-size=&#34;1051x552&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-17_hue8f39cb830b111f5676f74261c177ba9_21130_480x0_resize_q75_box.jpg 480w, https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-17_hue8f39cb830b111f5676f74261c177ba9_21130_1024x0_resize_q75_box.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-17.jpg&#34; width=&#34;1051&#34; height=&#34;552&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;What we really want to do is to get the similar CI/CD pipeline going on like we had with Static Web Apps.&lt;/p&gt;
&lt;ol start=&#34;9&#34;&gt;
&lt;li&gt;Within the &amp;ldquo;Shared access signature&amp;rdquo; blade of the storage account, generate a SAS connection string with the same permissions as below screenshot. Set the start/expiration date to suit your needs.&lt;/li&gt;
&lt;li&gt;Make note of the &lt;code&gt;Connection string&lt;/code&gt; at the bottom.&lt;/li&gt;
&lt;li&gt;From the Settings of your GitHub repository, create a secret named &lt;code&gt;AZURE_STORAGE_BLOB_SAS_CONNECTIONSTRING&lt;/code&gt;.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-18.jpg&#34; data-size=&#34;1344x1315&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-18_hu81fb38a9e4eb0d857fedfe6ad8a6b63e_144502_480x0_resize_q75_box.jpg 480w, https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-18_hu81fb38a9e4eb0d857fedfe6ad8a6b63e_144502_1024x0_resize_q75_box.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-18.jpg&#34; width=&#34;1344&#34; height=&#34;1315&#34; loading=&#34;lazy&#34;
				alt=&#34;Create SAS and connection string&#34;&gt;
		&lt;/a&gt;
		
		&lt;figcaption&gt;Create SAS and connection string&lt;/figcaption&gt;
		
	&lt;/figure&gt; &lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-19.jpg&#34; data-size=&#34;1424x892&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-19_hu7eb12ce693e09550046076b69eeec561_69124_480x0_resize_q75_box.jpg 480w, https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-19_hu7eb12ce693e09550046076b69eeec561_69124_1024x0_resize_q75_box.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-19.jpg&#34; width=&#34;1424&#34; height=&#34;892&#34; loading=&#34;lazy&#34;
				alt=&#34;Create secret in your GitHub repository&#34;&gt;
		&lt;/a&gt;
		
		&lt;figcaption&gt;Create secret in your GitHub repository&lt;/figcaption&gt;
		
	&lt;/figure&gt;&lt;/p&gt;
&lt;ol start=&#34;12&#34;&gt;
&lt;li&gt;Create a file in your repository named &lt;code&gt;azure-blob-storage.yml&lt;/code&gt; (or whatever you want, it really doesn&amp;rsquo;t matter, must be &lt;code&gt;.yml&lt;/code&gt; though) in &lt;code&gt;.github\workflows&lt;/code&gt; directory (that does matter, it must live in there). Use the below to populate to populate its contents.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;Azure Storage Blob Container CI/CD&lt;/span&gt;

&lt;span style=&#34;color:#f92672&#34;&gt;on&lt;/span&gt;:
  &lt;span style=&#34;color:#f92672&#34;&gt;push&lt;/span&gt;: 
    &lt;span style=&#34;color:#f92672&#34;&gt;branches&lt;/span&gt;:
      - &lt;span style=&#34;color:#ae81ff&#34;&gt;master&lt;/span&gt;

&lt;span style=&#34;color:#f92672&#34;&gt;jobs&lt;/span&gt;:
  &lt;span style=&#34;color:#f92672&#34;&gt;deploy&lt;/span&gt;:
    &lt;span style=&#34;color:#f92672&#34;&gt;runs-on&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;ubuntu-latest&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;steps&lt;/span&gt;:
      - &lt;span style=&#34;color:#f92672&#34;&gt;uses&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;actions/checkout@v2&lt;/span&gt;
        &lt;span style=&#34;color:#f92672&#34;&gt;with&lt;/span&gt;:
          &lt;span style=&#34;color:#f92672&#34;&gt;submodules&lt;/span&gt;: &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;
      
      - &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;Get Hugo&lt;/span&gt;
        &lt;span style=&#34;color:#f92672&#34;&gt;uses&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;peaceiris/actions-hugo@v2&lt;/span&gt;
        &lt;span style=&#34;color:#f92672&#34;&gt;with&lt;/span&gt;:
          &lt;span style=&#34;color:#f92672&#34;&gt;hugo-version&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;0.76.3&amp;#39;&lt;/span&gt;
          &lt;span style=&#34;color:#f92672&#34;&gt;extended&lt;/span&gt;: &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;

      - &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;Build&lt;/span&gt;
        &lt;span style=&#34;color:#f92672&#34;&gt;run&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;hugo&lt;/span&gt;

      - &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;Azure Blob Upload&lt;/span&gt;
        &lt;span style=&#34;color:#f92672&#34;&gt;uses&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;bacongobbler/azure-blob-storage-upload@v1.1.1&lt;/span&gt;
        &lt;span style=&#34;color:#f92672&#34;&gt;with&lt;/span&gt;:
          &lt;span style=&#34;color:#f92672&#34;&gt;connection_string&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;${{ secrets.AZURE_STORAGE_BLOB_SAS_CONNECTIONSTRING }}&lt;/span&gt;
          &lt;span style=&#34;color:#f92672&#34;&gt;source_dir&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;public&lt;/span&gt;
          &lt;span style=&#34;color:#f92672&#34;&gt;container_name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;$web&lt;/span&gt;
          &lt;span style=&#34;color:#f92672&#34;&gt;sync&lt;/span&gt;: &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;13&#34;&gt;
&lt;li&gt;Commit and push to your master branch.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Watch the status of the GitHub action at &lt;code&gt;https://github.com/YOUR_USERNAME/YOUR_REPO/actions&lt;/code&gt;. If it ran successfully without any errors, you will see your Hugo website live at your domain!&lt;/p&gt;
&lt;p&gt;If you want to make any more changes to your website, that&amp;rsquo;s OK! With the above workflow in your repo, every time you commit to master, the workflow will be triggered and it will upload everything that gets created in the &lt;code&gt;public&lt;/code&gt; directory within the runner to your &lt;code&gt;$web&lt;/code&gt; container.&lt;/p&gt;
&lt;h2 id=&#34;github-pages&#34;&gt;GitHub Pages&lt;/h2&gt;
&lt;p&gt;Last but definitely not least is &lt;a class=&#34;link&#34; href=&#34;https://pages.github.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;GitHub Pages&lt;/a&gt;. I think this is probably my favourite because it is &lt;a class=&#34;link&#34; href=&#34;https://docs.github.com/en/free-pro-team@latest/github/working-with-github-pages/creating-a-github-pages-site&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;the simplest to create&lt;/a&gt; and absolutely free.&lt;/p&gt;
&lt;p&gt;It is worth pointing out some &lt;a class=&#34;link&#34; href=&#34;https://docs.github.com/en/free-pro-team@latest/github/working-with-github-pages/about-github-pages#usage-limits&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;usage limits associated with GitHub Pages&lt;/a&gt;: soft bandwidth limit of 100GB p/month and repositories should ideally not be larger than 1GB.&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://gohugo.io/hosting-and-deployment/hosting-on-github/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Hugo also has some excellent docs&lt;/a&gt; on deploying to GitHub Pages. They suggest a reasonable idea where we have two repositories for our static website, instead of one. One contains your Hugo sources, and another - which is added as a Git submodule - holds our Hugo generated HTML content. The former would be a repository named whatever you want, for example &lt;code&gt;&amp;lt;username&amp;gt;.github.io-hugo&lt;/code&gt;, whereas the latter would be named &lt;code&gt;&amp;lt;username&amp;gt;.github.io&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Instead of that, we are going to keep focused on using GitHub Actions. This will enable to create a pipeline for Hugo to grab content from repository, and use it to publish to another. In other words, we will still have two repositories however we will not create a submodule for the &lt;code&gt;public&lt;/code&gt; directory.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Create your repository named &lt;code&gt;&amp;lt;username&amp;gt;.github.io&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Go to the Settings of your repository&lt;/li&gt;
&lt;li&gt;Enable GitHub Pages by choosing your branch (&lt;code&gt;master&lt;/code&gt;) and folder (&lt;code&gt;/&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Within the same section from the previous step, optionally enter your custom domain&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;If you do enter a custom domain, check out this documentation on &lt;a class=&#34;link&#34; href=&#34;https://docs.github.com/en/free-pro-team@latest/github/working-with-github-pages/managing-a-custom-domain-for-your-github-pages-site&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Managing a customer domain for your GitHub Pages site&lt;/a&gt;.&lt;/p&gt;
&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;Check the box to &lt;code&gt;Enforce HTTPS&lt;/code&gt; however note that this really does take ~24 hours to generate the certificate.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-20.jpg&#34; data-size=&#34;1276x356&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-20_hu2fc4b8bb8c4d2bfd479f0e8a6b1991be_28663_480x0_resize_q75_box.jpg 480w, https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-20_hu2fc4b8bb8c4d2bfd479f0e8a6b1991be_28663_1024x0_resize_q75_box.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-20.jpg&#34; width=&#34;1276&#34; height=&#34;356&#34; loading=&#34;lazy&#34;
				alt=&#34;GitHub repository settings&#34;&gt;
		&lt;/a&gt;
		
		&lt;figcaption&gt;GitHub repository settings&lt;/figcaption&gt;
		
	&lt;/figure&gt; &lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-21.jpg&#34; data-size=&#34;1424x892&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-21_hubf36c5012ab5c09dbe2db0bf298f396d_73874_480x0_resize_q75_box.jpg 480w, https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-21_hubf36c5012ab5c09dbe2db0bf298f396d_73874_1024x0_resize_q75_box.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/deploying-hugo-websites-in-azure-for-pennies-or-free-on-github-pages/images/staticwebapp-21.jpg&#34; width=&#34;1424&#34; height=&#34;892&#34; loading=&#34;lazy&#34;
				alt=&#34;Configure GitHub repository for GitHub Pages&#34;&gt;
		&lt;/a&gt;
		
		&lt;figcaption&gt;Configure GitHub repository for GitHub Pages&lt;/figcaption&gt;
		
	&lt;/figure&gt;&lt;/p&gt;
&lt;ol start=&#34;6&#34;&gt;
&lt;li&gt;Go to your &lt;a class=&#34;link&#34; href=&#34;https://github.com/settings/tokens&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;GitHub account&amp;rsquo;s developer settings&lt;/a&gt; and &lt;a class=&#34;link&#34; href=&#34;https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/creating-a-personal-access-token&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;create a Personal access token&lt;/a&gt;. Make note of the generated token for use in a couple of steps.&lt;/li&gt;
&lt;li&gt;Create another repository that will contain our Hugo sources, named something like &lt;code&gt;&amp;lt;username&amp;gt;.github.io-hugo&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Go to the Settings of your newly created repository (with -hugo in the name) and &lt;a class=&#34;link&#34; href=&#34;https://docs.github.com/en/free-pro-team@latest/actions/reference/encrypted-secrets#creating-encrypted-secrets-for-a-repository&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;create a new secret&lt;/a&gt; named something like &lt;code&gt;&amp;lt;username&amp;gt;githubiohugo&lt;/code&gt;. Its value will be the personal access token we created moments ago.&lt;/li&gt;
&lt;li&gt;Clone your &lt;code&gt;&amp;lt;username&amp;gt;.github.io-hugo&lt;/code&gt; repository to your computer and copy all of your Hugo content in to it, excluding the &lt;code&gt;public&lt;/code&gt; directory&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code&gt;PS C:\git&amp;gt; git clone https://github.com/USERNAME/USERNAME.github.io-hugo.git
&lt;/code&gt;&lt;/pre&gt;&lt;ol start=&#34;10&#34;&gt;
&lt;li&gt;Create &lt;code&gt;publish.yml&lt;/code&gt; in &lt;code&gt;.github/workflows&lt;/code&gt; and put the below content inside it, adjusting the necessary values that read &lt;code&gt;&amp;lt;CHANGEME&amp;gt;&lt;/code&gt;:&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;Publish site&lt;/span&gt;

&lt;span style=&#34;color:#f92672&#34;&gt;on&lt;/span&gt;: 
  &lt;span style=&#34;color:#f92672&#34;&gt;push&lt;/span&gt;:
    &lt;span style=&#34;color:#f92672&#34;&gt;branch&lt;/span&gt;:
      - &lt;span style=&#34;color:#ae81ff&#34;&gt;master&lt;/span&gt;

&lt;span style=&#34;color:#f92672&#34;&gt;jobs&lt;/span&gt;:
  &lt;span style=&#34;color:#f92672&#34;&gt;publish&lt;/span&gt;:
    &lt;span style=&#34;color:#f92672&#34;&gt;runs-on&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;ubuntu-latest&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;steps&lt;/span&gt;:
      - &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;Git checkout&lt;/span&gt;
        &lt;span style=&#34;color:#f92672&#34;&gt;uses&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;actions/checkout@v2&lt;/span&gt;

      - &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;Update theme&lt;/span&gt;
        &lt;span style=&#34;color:#f92672&#34;&gt;run&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;git submodule update --init --recursive # Optional if you have the theme added as submodule, you can pull it and use the most updated version&lt;/span&gt;

      - &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;Setup hugo&lt;/span&gt;
        &lt;span style=&#34;color:#f92672&#34;&gt;uses&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;peaceiris/actions-hugo@v2&lt;/span&gt;
        &lt;span style=&#34;color:#f92672&#34;&gt;with&lt;/span&gt;:
          &lt;span style=&#34;color:#f92672&#34;&gt;hugo-version&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;0.75.1&amp;#34;&lt;/span&gt;
          &lt;span style=&#34;color:#f92672&#34;&gt;extended&lt;/span&gt;: &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;

      - &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;Build&lt;/span&gt;
        &lt;span style=&#34;color:#f92672&#34;&gt;run&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;hugo&lt;/span&gt;

      - &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;Deploy&lt;/span&gt;
        &lt;span style=&#34;color:#f92672&#34;&gt;uses&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;peaceiris/actions-gh-pages@v3&lt;/span&gt;
        &lt;span style=&#34;color:#f92672&#34;&gt;with&lt;/span&gt;:
          &lt;span style=&#34;color:#f92672&#34;&gt;personal_token&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;${{ secrets.&amp;lt;CHANGEME&amp;gt; }} # The name of the secret you created in step 8&lt;/span&gt;
          &lt;span style=&#34;color:#f92672&#34;&gt;external_repository&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;&amp;lt;CHANGEME&amp;gt; # The name of the GitHub Pages repository, e.g. &amp;lt;username&amp;gt;/&amp;lt;username&amp;gt;.github.io&lt;/span&gt;
          &lt;span style=&#34;color:#f92672&#34;&gt;publish_dir&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;./public&lt;/span&gt;
          &lt;span style=&#34;color:#f92672&#34;&gt;user_name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;&amp;lt;CHANGEME&amp;gt; # The git username used for publishing commits to external_repository&lt;/span&gt;
          &lt;span style=&#34;color:#f92672&#34;&gt;user_email&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;&amp;lt;CHANGEME&amp;gt; # The git email address used for publishing commits to external_repository&lt;/span&gt;
          &lt;span style=&#34;color:#f92672&#34;&gt;publish_branch&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;master&lt;/span&gt;
          &lt;span style=&#34;color:#f92672&#34;&gt;cname&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;&amp;lt;CHANGEME&amp;gt; # If you configured your own domain, you may want to populate this with it, e.g. mine is adamcook.io.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://ruddra.com/hugo-deploy-static-page-using-github-actions/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Thank you to Ruddra for inspiration of this YAML!&lt;/a&gt;&lt;/p&gt;
&lt;ol start=&#34;11&#34;&gt;
&lt;li&gt;At this point, before we commit and push up to GitHub, issue &lt;code&gt;hugo server&lt;/code&gt; within the &lt;code&gt;C:\git\USERNAME.github.io-hugo&lt;/code&gt; directory and check out how things look locally by browsing to &lt;a class=&#34;link&#34; href=&#34;http://localhost:1313&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;http://localhost:1313&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;If all looks good, commit and push. The GitHub Actions workflow will take care of the rest of:
&lt;ol&gt;
&lt;li&gt;Invoking Hugo to generate content in &lt;code&gt;public&lt;/code&gt; within the runner&lt;/li&gt;
&lt;li&gt;Publish said content to our GitHub Pages &lt;code&gt;&amp;lt;username&amp;gt;.github.io&lt;/code&gt; repository&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;closing-comments&#34;&gt;Closing comments&lt;/h2&gt;
&lt;p&gt;I hope you found this helpful!&lt;/p&gt;
&lt;p&gt;If you have any questions or feedback, drop a comment below, ping me on Twitter or find me in the &lt;a class=&#34;link&#34; href=&#34;https://winadmins.io&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;WinAdmins Discord&lt;/a&gt; (my handle is @acc)!&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Creating Dynamic Azure ARM Templates</title>
        <link>https://adamcook.io/p/creating-dynamic-azure-arm-templates/</link>
        <pubDate>Sun, 05 Jul 2020 00:00:00 +0100</pubDate>
        
        <guid>https://adamcook.io/p/creating-dynamic-azure-arm-templates/</guid>
        <description>&lt;img src="https://adamcook.io/p/creating-dynamic-azure-arm-templates/images/cover.jpg" alt="Featured image of post Creating Dynamic Azure ARM Templates" /&gt;&lt;p&gt;In this post I&amp;rsquo;ll demonstrate how you can dynamically create resources or set properties for resources in your Azure ARM templates.&lt;/p&gt;
&lt;p&gt;For example, you might have a template which accepts an array. For each element in that array, you want to create resources, or set properties for a resource.&lt;/p&gt;
&lt;p&gt;The first objective will demonstrate how to create a dynamic number of properties associated with a resource. The second object will show you how to dynamically create a number of resources. The examples will revolve around creating virtual networks and subnets.&lt;/p&gt;
&lt;h2 id=&#34;arm-template-functions&#34;&gt;ARM template functions&lt;/h2&gt;
&lt;p&gt;There&amp;rsquo;s a bunch of &lt;a class=&#34;link&#34; href=&#34;https://docs.microsoft.com/en-us/azure/azure-resource-manager/templates/template-functions&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ARM template functions&lt;/a&gt; available that you do all kinds of things within your templates: logical operators and conditional actions, string manipulation, array conversions or iteration, arithmetic. All kinds of things.&lt;/p&gt;
&lt;p&gt;Using functions within ARM templates make the json files more than just declarative build documents. They enable you to get creative and implement some programmable logic in to your templates. This can help with making your templates being more versatile.&lt;/p&gt;
&lt;p&gt;For this demo I&amp;rsquo;ll focus on the functions &lt;code&gt;[length()]&lt;/code&gt;, &lt;code&gt;[concat()]&lt;/code&gt; and &lt;code&gt;[copyIndex()]&lt;/code&gt;.&lt;/p&gt;
&lt;h2 id=&#34;objective-1&#34;&gt;Objective 1&lt;/h2&gt;
&lt;p&gt;Take the scenario where your current template contains a single virtual network resource and you hardcode the virtual network&amp;rsquo;s address space properties and all the subnets too.&lt;/p&gt;
&lt;p&gt;Maybe you decide to create some logic in your scripts where you dynamically create x many subnets. To do this, we are going to dynamically add x many properties to the &lt;code&gt;Microsoft.Network/VirtualNetworks&lt;/code&gt; resource.&lt;/p&gt;
&lt;p&gt;Let&amp;rsquo;s start with the below example using those hardcoded properties and subnets.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-JSON&#34; data-lang=&#34;JSON&#34;&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;...&lt;/span&gt;
{
	&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;vnet01&amp;#34;&lt;/span&gt;,
	&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Microsoft.Network/VirtualNetworks&amp;#34;&lt;/span&gt;,
	&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;apiVersion&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2019-09-01&amp;#34;&lt;/span&gt;,
	&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;location&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;uksouth&amp;#34;&lt;/span&gt;,
	&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;properties&amp;#34;&lt;/span&gt;: {
		&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;addressSpace&amp;#34;&lt;/span&gt;: {
			&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;addressPrefixes&amp;#34;&lt;/span&gt;: [
				&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;192.168.0.0/16&amp;#34;&lt;/span&gt;
			]
		},
		&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;subnets&amp;#34;&lt;/span&gt;: [
			{
				&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;subnet-1&amp;#34;&lt;/span&gt;,
				&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;properties&amp;#34;&lt;/span&gt;: {
					&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;addressPrefix&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;192.168.1.0/24&amp;#34;&lt;/span&gt;
				}
			},
			{
				&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;subnet-2&amp;#34;&lt;/span&gt;,
				&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;properties&amp;#34;&lt;/span&gt;: {
					&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;addressPrefix&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;192.168.2.0/24&amp;#34;&lt;/span&gt;
				}
			},
			{
				&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;subnet-3&amp;#34;&lt;/span&gt;,
				&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;properties&amp;#34;&lt;/span&gt;: {
					&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;addressPrefix&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;192.168.3.0/24&amp;#34;&lt;/span&gt;
				}
			}
		]
	}
}
&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;...&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Our objective is to dynamically create as many subnets as many there are elements in the parameter value named &lt;code&gt;subnets&lt;/code&gt;, which is an array of just address prefixes, e.g. &lt;code&gt;192.168.1.0/24&lt;/code&gt;, &lt;code&gt;192.168.2.0/24&lt;/code&gt; and &lt;code&gt;192.168.3.0/24&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;For the &lt;code&gt;properties&lt;/code&gt; object we&amp;rsquo;re going to heavily modify the &lt;code&gt;subnets&lt;/code&gt; array and replace it with the &lt;code&gt;copy&lt;/code&gt; element. This element enables us to create a dynamic number of resources or properties. The &lt;code&gt;copy&lt;/code&gt; element is effectively what allows us to create a loop within our template. It accepts an array of three objects: &lt;code&gt;name&lt;/code&gt;, &lt;code&gt;count&lt;/code&gt; and &lt;code&gt;input&lt;/code&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;name&lt;/code&gt;: the name of our loop. We use this name to reference an iterable.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;count&lt;/code&gt;:  the number of times we want to iterate over our loop.&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;code&gt;input&lt;/code&gt;: this is where we specify values for our resource&amp;rsquo;s properties.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;An example of the &lt;code&gt;copy&lt;/code&gt; element looks like the below.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-JSON&#34; data-lang=&#34;JSON&#34;&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;...&lt;/span&gt;
{
	&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;vnet01&amp;#34;&lt;/span&gt;,
	&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Microsoft.Network/VirtualNetworks&amp;#34;&lt;/span&gt;,
	&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;apiVersion&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2019-09-01&amp;#34;&lt;/span&gt;,
	&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;location&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;uksouth&amp;#34;&lt;/span&gt;,
	&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;properties&amp;#34;&lt;/span&gt;: {
		&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;addressSpace&amp;#34;&lt;/span&gt;: {
			&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;addressPrefixes&amp;#34;&lt;/span&gt;: [
				&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;192.168.0.0/16&amp;#34;&lt;/span&gt;
			]
		},
		&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;copy&amp;#34;&lt;/span&gt;: [
			{
				&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;subnets&amp;#34;&lt;/span&gt;,
				&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;count&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;,
				&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;input&amp;#34;&lt;/span&gt;: {
					&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;[concat(&amp;#39;subnet-&amp;#39;, copyIndex(&amp;#39;subnets&amp;#39;, 1))]&amp;#34;&lt;/span&gt;,
					&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;properties&amp;#34;&lt;/span&gt;: {
						&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;addressPrefix&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;[concat(&amp;#39;192.168.&amp;#39;, copyIndex(&amp;#39;subnets&amp;#39;, 1), &amp;#39;0/24&amp;#39;)&amp;#34;&lt;/span&gt;
					}
				}
			}
		]
	}
}
&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;...&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The above simply creates 3 subnet with far fewer lines. You&amp;rsquo;ll notice two functions I haven&amp;rsquo;t explained yet: &lt;code&gt;[concat()]&lt;/code&gt; and &lt;code&gt;[copyIndex()]&lt;/code&gt;. The Microsoft docs do a good job on explaining these, but&amp;hellip;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;[concat()]&lt;/code&gt; allows you to concatenate arrays or strings. It accepts at a minimum of 1 argument and any number of additional arguments. You can see this is used to define a unique name for each subnet.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;[copyIndex()]&lt;/code&gt; allows you to access the position/index of the current iterable in the loop. We pass two parameters: the name of the loop &amp;ldquo;subnets&amp;rdquo; and an offset. Using the offset is what enables us to start with creating subnet names from &amp;ldquo;subnets-1&amp;rdquo; rather than &amp;ldquo;subnets-0&amp;rdquo;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;You notice I use both &lt;code&gt;[concat()]&lt;/code&gt; and &lt;code&gt;[copyIndex()]&lt;/code&gt; for the &lt;code&gt;addressPrefix&lt;/code&gt; property. This enables me to bump the subnet by 1 and correlate the subnet name with the 3rd subnet octet.&lt;/p&gt;
&lt;p&gt;There&amp;rsquo;s definitely room for improvement here. The &lt;code&gt;count&lt;/code&gt; object of the &lt;code&gt;copy&lt;/code&gt; element is hardcoded at the value of 3. What we could do is leverage a parameter of our json value, which contains an array of strings for all the subnets we want in our virtual network.&lt;/p&gt;
&lt;p&gt;The below is what an ideal could look like that creates subnets based on all the items in a given array:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-JSON&#34; data-lang=&#34;JSON&#34;&gt;{
	&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;$schema&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;contentVersion&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;1.0.0.0&amp;#34;&lt;/span&gt;,
	&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;parameters&amp;#34;&lt;/span&gt;: {
		&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;subnetAddressSpaces&amp;#34;&lt;/span&gt;: {
			&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;array&amp;#34;&lt;/span&gt;,
			&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;defaultValue&amp;#34;&lt;/span&gt;: [
				&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;192.168.1.0/24&amp;#34;&lt;/span&gt;,
				&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;192.168.2.0/24&amp;#34;&lt;/span&gt;,
				&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;192.168.3.0/24&amp;#34;&lt;/span&gt;
			]
		}
	},
	&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;variables&amp;#34;&lt;/span&gt;: {},
	&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;resources&amp;#34;&lt;/span&gt;: [
		{
			&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;vnet01&amp;#34;&lt;/span&gt;,
			&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Microsoft.Network/VirtualNetworks&amp;#34;&lt;/span&gt;,
			&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;apiVersion&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2019-09-01&amp;#34;&lt;/span&gt;,
			&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;location&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;uksouth&amp;#34;&lt;/span&gt;,
			&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;properties&amp;#34;&lt;/span&gt;: {
				&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;addressSpace&amp;#34;&lt;/span&gt;: {
					&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;addressPrefixes&amp;#34;&lt;/span&gt;: [
						&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;192.168.0.0/16&amp;#34;&lt;/span&gt;
					]
				},
				&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;copy&amp;#34;&lt;/span&gt;: [
					{
						&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;subnets&amp;#34;&lt;/span&gt;,
						&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;count&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;[length(parameters(&amp;#39;subnetAddressSpaces&amp;#39;))]&amp;#34;&lt;/span&gt;,
						&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;input&amp;#34;&lt;/span&gt;: {
							&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;[concat(&amp;#39;subnet-&amp;#39;, copyIndex(&amp;#39;subnets&amp;#39;, 1))]&amp;#34;&lt;/span&gt;,
							&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;properties&amp;#34;&lt;/span&gt;: {
								&lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;addressPrefix&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;[parameters(&amp;#39;subnetAddressSpaces&amp;#39;)[copyIndex(&amp;#39;subnets&amp;#39;)]]&amp;#34;&lt;/span&gt;
							}
						}
					}
				]
			}
		}
	]
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;In the above you can see I&amp;rsquo;ve included what the parameter definition this time, and defining the array of subset address spaces by specifying &lt;code&gt;defaultValue&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;What I&amp;rsquo;m doing differently here is using two different functions &lt;code&gt;[length()]&lt;/code&gt; and &lt;code&gt;[parameters()]&lt;/code&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;[length()]&lt;/code&gt; is what enables us to gather the number of elements within an array. In this case the value will be 3. This function can also be used to get the number of characters in a string or number of root-level properties in a given object.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;[parameters()]&lt;/code&gt; is hopefully obvious, but if not it&amp;rsquo;s how we can access the value of a parameter by passing one of the template&amp;rsquo;s parameter names.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;What the above in mind, you can see for the &lt;code&gt;count&lt;/code&gt; object we now have a means to loop for x many iterations for y many elements in the &lt;code&gt;subnetAddressSpaces&lt;/code&gt; array. You&amp;rsquo;ll also notice, we&amp;rsquo;re no longer concatenating a string to create our subnets&#39; address space. Instead we&amp;rsquo;re directly accessing the value in the array by referencing the index position of the returned by &lt;code&gt;[copyIndex()]&lt;/code&gt;. In other words, we&amp;rsquo;re grabbing the current value of the iterable in the loop.&lt;/p&gt;
&lt;p&gt;Hopefully now you get the sense that this whole combination of the &lt;code&gt;copy&lt;/code&gt; element, with functions &lt;code&gt;[length()]&lt;/code&gt; and &lt;code&gt;[copyIndex()]&lt;/code&gt; is pretty much a for in-range loop interpreted by Azure within our json.&lt;/p&gt;
&lt;h2 id=&#34;objective-2&#34;&gt;Objective 2&lt;/h2&gt;
&lt;p&gt;As for the second objective (dynamically creating resources, instead of dynamically setting properties of a resource&amp;rsquo;s properties&amp;hellip; wait, what?!), there&amp;rsquo;s hardly any difference, except there&amp;rsquo;s no need to use the &lt;code&gt;input&lt;/code&gt; object within the &lt;code&gt;copy&lt;/code&gt; element.&lt;/p&gt;
&lt;p&gt;Below I&amp;rsquo;ll share a complete working example of the template and a short PowerShell snippet to create the deployment.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-JSON&#34; data-lang=&#34;JSON&#34;&gt;{
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;$schema&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;contentVersion&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;1.0.0.0&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;parameters&amp;#34;&lt;/span&gt;: {
        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;virtualNetworkAddressSpaces&amp;#34;&lt;/span&gt;: {
            &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;array&amp;#34;&lt;/span&gt;
        }
    },
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;variables&amp;#34;&lt;/span&gt;: {},
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;resources&amp;#34;&lt;/span&gt;: [
        {
            &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;[concat(&amp;#39;vnet-&amp;#39;, copyIndex(&amp;#39;vnetloop&amp;#39;, 1))]&amp;#34;&lt;/span&gt;,
            &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Microsoft.Network/VirtualNetworks&amp;#34;&lt;/span&gt;,
            &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;apiVersion&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2019-09-01&amp;#34;&lt;/span&gt;,
            &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;location&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;uksouth&amp;#34;&lt;/span&gt;,
            &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;dependsOn&amp;#34;&lt;/span&gt;: [],
            &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;tags&amp;#34;&lt;/span&gt;: {},
            &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;copy&amp;#34;&lt;/span&gt;: {
                &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;vnetloop&amp;#34;&lt;/span&gt;,
                &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;count&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;[length(parameters(&amp;#39;virtualNetworkAddressSpaces&amp;#39;))]&amp;#34;&lt;/span&gt;
            },
            &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;properties&amp;#34;&lt;/span&gt;: {
                &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;addressSpace&amp;#34;&lt;/span&gt;: {
                    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;addressPrefixes&amp;#34;&lt;/span&gt;: [
                        &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;[parameters(&amp;#39;virtualNetworkAddressSpaces&amp;#39;)[copyIndex(&amp;#39;vnetloop&amp;#39;)]]&amp;#34;&lt;/span&gt;
                    ]
                },
                &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;subnets&amp;#34;&lt;/span&gt;: [
                    {
                        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;subnet0&amp;#34;&lt;/span&gt;,
                        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;properties&amp;#34;&lt;/span&gt;: {
                            &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;addressPrefix&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;[parameters(&amp;#39;virtualNetworkAddressSpaces&amp;#39;)[copyIndex(&amp;#39;vnetloop&amp;#39;)]]&amp;#34;&lt;/span&gt;
                        }
                    }
                ]
            }
        }
    ]
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-powershell&#34; data-lang=&#34;powershell&#34;&gt;$TemplateParameters = @{
    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;virtualNetworkAddressSpaces&amp;#34;&lt;/span&gt; = @(
        &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;192.168.1.0/24&amp;#34;&lt;/span&gt;,
        &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;192.168.2.0/24&amp;#34;&lt;/span&gt;,
        &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;192.168.3.0/24&amp;#34;&lt;/span&gt;
    )
}

New-AzResourceGroupDeployment -Name &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;mytestdeployment&amp;#34;&lt;/span&gt; -ResourceGroupName &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;rg-mytest&amp;#34;&lt;/span&gt; -TemplateFile &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;.\vnet-template-2.json&amp;#34;&lt;/span&gt; -TemplateParameterObject $TemplateParameters
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;With the above we&amp;rsquo;re still making use of the [length()] function for the count property of the copy element. This still enables us to loop over the number of elements within the given array. You&amp;rsquo;ll also notice we&amp;rsquo;re just creating 1 subnet for each virtual network. Each subnet&amp;rsquo;s width is the entire width virtual network&amp;rsquo;s address space.&lt;/p&gt;
&lt;h2 id=&#34;summary&#34;&gt;Summary&lt;/h2&gt;
&lt;p&gt;I know these examples are really short. You&amp;rsquo;re really unlikely to want to &lt;em&gt;just&lt;/em&gt; dynamically create subnets or virtual networks, but hopefully this is offers you insightful examples to get you a working syntax for whatever it is you&amp;rsquo;re trying to do!&lt;/p&gt;
&lt;p&gt;The below Microsoft doc links may be helpful for you, if not ping me and I&amp;rsquo;ll be happy to help!&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://docs.microsoft.com/en-us/azure/azure-resource-manager/templates/template-functions&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ARM Template Functions&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://docs.microsoft.com/en-us/azure/azure-resource-manager/templates/copy-properties&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Property iteration in ARM templates&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>Get CMUnusedSources</title>
        <link>https://adamcook.io/p/get-cmunusedsources/</link>
        <pubDate>Sun, 07 Jul 2019 00:00:00 +0100</pubDate>
        
        <guid>https://adamcook.io/p/get-cmunusedsources/</guid>
        <description>&lt;p&gt;I recently wrote a PowerShell script that reports on what folders are used or unused by System Center Configuration Manager.&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/codaamok/Get-CMUnusedSources&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;You can find it here on GitHub&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I demoed the script at the &lt;a class=&#34;link&#34; href=&#34;https://wmug.co.uk/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;London Windows Manager User Group&lt;/a&gt;, you can watch the recording below on YouTube.&lt;/p&gt;

&lt;div style=&#34;position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;&#34;&gt;
  &lt;iframe loading=&#34;lazy&#34; src=&#34;https://www.youtube.com/embed/YGwQIUhYJsY&#34; style=&#34;position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;&#34; allowfullscreen title=&#34;YouTube Video&#34;&gt;&lt;/iframe&gt;
&lt;/div&gt;

&lt;p&gt;Among a bunch of technical topics, I also learned a huge amount of valuable soft/personal things too.&lt;/p&gt;
&lt;h2 id=&#34;enough-is-enough&#34;&gt;Enough is enough&lt;/h2&gt;
&lt;p&gt;I started writing in February and since then I have refactored the script and the idea itself many times. It&amp;rsquo;s now start of July and my girlfriend and I want to do fun summer things.&lt;/p&gt;
&lt;p&gt;I first &amp;ldquo;finished&amp;rdquo; it in April but it was only good if you stored your content sources on a local file system to a site server. I realised that a lot of admins store their sources on a remote file server. I tried to &amp;ldquo;drop in&amp;rdquo; accommodations for that but quickly accepted that I was creating fragile flows and hard to read solutions. This is one of the few times I did a &amp;ldquo;sod it, let&amp;rsquo;s start again&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;Around end of May I had a working script that worked with local and remote storage but it was slow. Because it iterates over all gathered folders, and for each folder, iterates over all ConfigMgr content objects, this meant in an environment with 10k content objects and 70k folders it took over 10 hours. I did my best to create efficiencies, such as to skip sub folders of folders already marked as &amp;ldquo;Not used&amp;rdquo; but 10 hours really wasn&amp;rsquo;t good.&lt;/p&gt;
&lt;p&gt;I was almost at a cross roads because I thought performance shouldn&amp;rsquo;t matter too much because this would be something that you would run once in a blue moon. Then I had that fear of posting online and being bombarded with &amp;ldquo;you should have done x instead of y&amp;rdquo;. I&amp;rsquo;m still at risk of that now (which I welcome by the way, especially for something I&amp;rsquo;m not aware of). It was that thought which pushed me to strive for better because I knew I could improve, and the improvement would be significant enough.&lt;/p&gt;
&lt;p&gt;Then I discovered runspaces! Sure, I could have used jobs or set a dependency to use the PoshRSJobs module, but I just wanted to learn runspaces, how to use them and not have a dependency on another module. So of course doing that added more time and testing. It was worth it though.&lt;/p&gt;
&lt;p&gt;Throughout the entire time I kept tricking myself in to thinking &amp;ldquo;I&amp;rsquo;m almost done&amp;rdquo;, &amp;ldquo;it&amp;rsquo;ll be done next week&amp;rdquo;, &amp;ldquo;it&amp;rsquo;s pretty much there&amp;rdquo;. Constant ideas and learning new techniques for readability / performance was another time killer.&lt;/p&gt;
&lt;p&gt;I once read that managers hate dealing with sysadmins because when tasked to create something they don&amp;rsquo;t lay the foundations first and get too hung up on the features. I sometimes saw myself as that guy.&lt;/p&gt;
&lt;p&gt;With that said, I also felt like I had a short fuse with it and had a &lt;em&gt;just want to get it done&lt;/em&gt; mindset. While working on this I started reading (and still yet to finish) &lt;a class=&#34;link&#34; href=&#34;https://www.goodreads.com/book/show/629.Zen_and_the_Art_of_Motorcycle_Maintenance&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Zen and the Art of Motorcycle Maintenance&lt;/a&gt;. In the early chapters there was emphasis on people rushing their day-to-day and the work they do. I related to this and was guilty of that at times with this script. So then I decided if I&amp;rsquo;m not taking my time to do it carefully then there&amp;rsquo;s no point doing it at all.&lt;/p&gt;
&lt;p&gt;At this point, summer had started, and for me that means cricket season was on and while working during the week, that meant every Saturday was spent all day playing cricket. I just wanted to spend every free hour I had finishing this but conscious of not wanting to rush it.&lt;/p&gt;
&lt;p&gt;I had to draw a line in the sand and make my primary goal to finish it with what I had. I wanted to spend time with my girlfriend, finish that book, learn something else, fix that broken window motor on my car I&amp;rsquo;ve had for over a year, play a few nights of CS:GO.&lt;/p&gt;
&lt;p&gt;I really enjoyed the brain teasers though. I would be drawing what the flow of some loops looked like in my head while in the shower or driving. Realistically, I know I&amp;rsquo;m never finished. No doubt if someone found an issue with it I&amp;rsquo;ll be curious and want to fix it.&lt;/p&gt;
&lt;p&gt;I think next time I have some idea that I think will consume any amount of time, I should first spend time thinking about what the end product looks like. Then I should be able to know at what point I would want to bring the idea/project to a close.&lt;/p&gt;
&lt;h2 id=&#34;asking-for-help&#34;&gt;Asking for help&lt;/h2&gt;
&lt;p&gt;A buddy &lt;a class=&#34;link&#34; href=&#34;http://www.christopherkibble.com&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Chris Kibble&lt;/a&gt; shared with me &lt;a class=&#34;link&#34; href=&#34;http://www.catb.org/~esr/faqs/smart-questions.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;How to ask questions the smart way&lt;/a&gt;. Looks like this is a link from the &lt;a class=&#34;link&#34; href=&#34;http://xyproblem.info/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;The XY Problem&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;These two resources are huge and you may not yet appreciate why. I&amp;rsquo;ve been on the Internet for as long as I can remember and have been posting stupid questions for most of my life.&lt;/p&gt;
&lt;p&gt;When I became mindful of the XY problem and how to ask for help from people who are insanely good, I became much more effective. A part of asking for help is about first having a bloody good stab at it yourself. This often pushed me to not necessarily find the answers but to help me think more inquisitively. I found as a result of asking myself more questions, it enabled me to understand problems better and sometimes find the answer.&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;m in the &lt;a class=&#34;link&#34; href=&#34;https://winadmins.io&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Windows Admins&lt;/a&gt; Discord and some people in there are not only clever but incredibly helpful. Just to say thanks to people who helped me:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Cody Mathis (&lt;a class=&#34;link&#34; href=&#34;https://github.com/codymathis123&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;@codymathis123&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Chris Kibble (&lt;a class=&#34;link&#34; href=&#34;https://github.com/ChrisKibble&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;@ChrisKibble&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Chris Dent (&lt;a class=&#34;link&#34; href=&#34;https://github.com/idented-automation&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;@idented-automation&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Kevin Crouch (&lt;a class=&#34;link&#34; href=&#34;httos://github.com/PsychoData&#34; &gt;@PsychoData&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Patrick (the guy who wrote &lt;a class=&#34;link&#34; href=&#34;https://github.com/pseymour/MakeMeAdmin/wiki&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;MakeMeAdmin&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;powershell&#34;&gt;PowerShell&lt;/h2&gt;
&lt;p&gt;So I wrote a PowerShell script and I learnt some PowerShell. Of course. Well here&amp;rsquo;s what I learnt.&lt;/p&gt;
&lt;h2 id=&#34;debugger&#34;&gt;Debugger&lt;/h2&gt;
&lt;p&gt;VSCode is my go-to editor. One of the many reasons why I like it, is because of the debugger with the integrated console. Once I read &lt;a class=&#34;link&#34; href=&#34;https://foxdeploy.com/2019/02/07/life-after-write-debug/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Life after Write-Debug&lt;/a&gt; by Stephen Owen I became much more efficient at troubleshooting my dodgy code.&lt;/p&gt;
&lt;p&gt;My first manager as an IT professional told me what the &lt;a class=&#34;link&#34; href=&#34;https://en.wikipedia.org/wiki/Rubber_duck_debugging&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;rubber duck debugging technique was&lt;/a&gt;. So when you discover something like debugging for PowerShell in ISE or VSCode, it&amp;rsquo;s a huge sense of relief. The days of intensely reading line by line or including a bunch of print / Write-Host commands are long gone.&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://community.idera.com/database-tools/powershell/powertips/b/tips/posts/debugging-other-powershell-processes&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;You can also debug other running PowerShell processes!!&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;standards-and-formatting&#34;&gt;Standards and formatting&lt;/h2&gt;
&lt;p&gt;For quick scripts with limited audience, I make some effort to format and make it at least somewhat presentable for next the guy. However taking on something fairly big that might be used and read by the Internet, I appreciated the need for not necessarily pretty looking code because that&amp;rsquo;s always subjective but at least adopt a standard.&lt;/p&gt;
&lt;p&gt;Again, kind of tapping in to that fear of posting online and being scrutinized.&lt;/p&gt;
&lt;h2 id=&#34;net&#34;&gt;.NET&lt;/h2&gt;
&lt;p&gt;I had always known you could do .NET stuff within PowerShell and whenever I saw it in conversation it was always in the context of scale or performance. I figured with what I was trying to achieve, this would fall under the scale category. I&amp;rsquo;ve seen environments with tens of thousands of ConfigMgr content objects and hundreds of thousands of folders.&lt;/p&gt;
&lt;p&gt;There&amp;rsquo;s a need here as well to determine when to draw the line. You could spend a long time looking up .NET classes and methods when you could save yourself a lot of time just using PowerShell cmdlets. Sure, there&amp;rsquo;s a performance gain, but as a sysadmin I think readability and time is more valuable. So I won&amp;rsquo;t make a habit of using them at every opportunity, purely because I&amp;rsquo;m not fluent enough. Being mindful of them and how or when to use them is good enough.&lt;/p&gt;
&lt;h2 id=&#34;enumeratedirectories&#34;&gt;EnumerateDirectories()&lt;/h2&gt;
&lt;p&gt;On the topic of .NET, I did really want to use the &lt;a class=&#34;link&#34; href=&#34;https://docs.microsoft.com/en-us/dotnet/api/system.io.directory.enumeratedirectories&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;EnumerateDirectories method from the Directory class&lt;/a&gt;. But it falls short where you can&amp;rsquo;t control its on-error preference. No matter what, on error, it&amp;rsquo;s a terminating error. Which sucked because it sounded perfect for what I wanted and crazy fast too.&lt;/p&gt;
&lt;p&gt;In situations where it encountered a folder with access denied, it wouldn&amp;rsquo;t continue.&lt;/p&gt;
&lt;h2 id=&#34;runspaces&#34;&gt;Runspaces&lt;/h2&gt;
&lt;p&gt;As I mentioned already I wanted concurrent processing so I had several options already available like jobs or the PoSHRSJobs module that gives you runspaces but with the familiar syntax as jobs. I opted to use runspaces and spend extra time learning more about how they work for two reasons mainly:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;To use something and make a good effort at actually trying to understand it.&lt;/li&gt;
&lt;li&gt;Not set too many dependencies on modules. I had a train of thought that not all ConfigMgr admins are full time admins, no doubt they juggle other stuff too. What if they really wanted to just clean up their storage but wasn&amp;rsquo;t 100% sure how to install a third party module just to get the basics working?&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;collections-the--operator&#34;&gt;Collections the += operator&lt;/h2&gt;
&lt;p&gt;I saw &lt;a class=&#34;link&#34; href=&#34;https://twitter.com/AndySvints/status/1130135528815439874&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;this thread on Twitter&lt;/a&gt; and my mind was blown how much quicker it was to not use the += operator when adding new elements to an array.&lt;/p&gt;
&lt;h2 id=&#34;join-path&#34;&gt;Join-Path&lt;/h2&gt;
&lt;p&gt;I guess I saw some quirks of PowerShell along the way but the biggest for me that sticks out in memory was Join-Path. Check out this madness:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;PS C:\&amp;gt; Test-Path &amp;quot;\\fakeserver\fakeshare\fakefolder&amp;quot;
False
PS C:\&amp;gt; Join-Path -Path &amp;quot;\\fakeserver&amp;quot; -ChildPath &amp;quot;fakeshare&amp;quot; | Join-Path -ChildPath &amp;quot;fakefolder&amp;quot;
\\fakeserver\fakeshare\fakefolder
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Join-Path copes well with paths that don&amp;rsquo;t exist. Awesome.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;PS C:\&amp;gt; Test-Path &amp;quot;K:\I\Do\Not\Have\K\Drive\Mapped&amp;quot;
False
PS C:\&amp;gt; Join-Path -Path &amp;quot;K:\&amp;quot; -ChildPath &amp;quot;I\Do\Not\Have\K\Drive\Mapped&amp;quot;
Join-Path : Cannot find drive. A drive with the name &#39;K&#39; does not exist.
At line:1 char:1
+ Join-Path -Path &amp;quot;K:\&amp;quot; -ChildPath &amp;quot;I\Do\Not\Have\K\Drive\Mapped&amp;quot;
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : ObjectNotFound: (K:String) [Join-Path], DriveNotFoundException
    + FullyQualifiedErrorId : DriveNotFound,Microsoft.PowerShell.Commands.JoinPathCommand
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&amp;hellip;unless it&amp;rsquo;s a local path on a drive letter that doesn&amp;rsquo;t exist. Worth remembering. You can&amp;rsquo;t really say Join-Path validates path as it joins them, because it doesn&amp;rsquo;t, nor can you say its sole purpose is to verify just &amp;ldquo;syntax&amp;rdquo; or &amp;ldquo;validity&amp;rdquo; of path structure, because it isn&amp;rsquo;t.&lt;/p&gt;
&lt;p&gt;Looks like there&amp;rsquo;s &lt;a class=&#34;link&#34; href=&#34;https://github.com/PowerShell/PowerShell/issues/4386&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;an open issue on this&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&#34;regex&#34;&gt;Regex&lt;/h2&gt;
&lt;p&gt;Early doors I was trying to grab the server, share and remainder share from a string: &lt;code&gt;\\server\share\folder\folder&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://twitter.com/CodyMathis123&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Cody Mathis&lt;/a&gt; threw me a little snippet of regex and from then on my eyes were opened. I&amp;rsquo;m even thinking of going back to a previous project &lt;a class=&#34;link&#34; href=&#34;https://github.com/codaamok/PoSHHyperCloud&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;PoSH Hyper Cloud&lt;/a&gt; to use more regex and maybe even jobs! &lt;a class=&#34;link&#34; href=&#34;http://regex101.com&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;regex101.com&lt;/a&gt; is my go to for testing expressions.&lt;/p&gt;
&lt;h2 id=&#34;enumerations&#34;&gt;Enumerations&lt;/h2&gt;
&lt;p&gt;Patrick Seymour recently wrote Test-FileSystemAccess and I enhanced it a little to return exit codes and determine if elevation is required. Some feedback by Chris Dent taught me about enums! They&amp;rsquo;re awesome. An excellent way to create a relationship between numbers and strings. I used the below resources to implement an enum in to Test-FileSystemAccess:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.pauby.com/post/working-with-enums-in-powershell&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Working with enums in PowerShell&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.pauby.com/post/creating-enums-in-powershell/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Creating enums in PowerShell&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Tip! If you want to get the full Parameter Type of a parameter that&amp;rsquo;s an enum, so you can use GetNames:: on it, the below will help:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-powershell&#34; data-lang=&#34;powershell&#34;&gt;(Get-Command Set-ExecutionPolicy).Parameters[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;ExecutionPolicy&amp;#39;&lt;/span&gt;] | Select -ExpandProperty ParameterType
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;datatables-and-filtering&#34;&gt;DataTables and filtering&lt;/h2&gt;
&lt;p&gt;I recently tackled an issue with the script where collections of large scale and filtering them was an issue. Chris Kibble once showed me DataTables and I remember a remark about them being quick. He wasn&amp;rsquo;t joking! Checkout the below!&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-powershell&#34; data-lang=&#34;powershell&#34;&gt;$winFiles = Get-ChildItem c:\windows -Recurse -ErrorAction SilentlyContinue

$commands = @{
    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Where-Object&amp;#39;&lt;/span&gt; = {
        $exeFiles = $winFiles | Where-Object { $_.Extension &lt;span style=&#34;color:#f92672&#34;&gt;-eq&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;.exe&amp;#34;&lt;/span&gt; }
    }
    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Where-Object (no script block)&amp;#39;&lt;/span&gt; = {
        $exeFiles = $winFiles | Where-Object Extension &lt;span style=&#34;color:#f92672&#34;&gt;-eq&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;.exe&amp;#34;&lt;/span&gt;
    }
    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;.Where&amp;#39;&lt;/span&gt; = {
        $exeFiles = $winFiles.Where{ $_.Extension &lt;span style=&#34;color:#f92672&#34;&gt;-eq&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;.exe&amp;#34;&lt;/span&gt; }
    }
    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;DataTable&amp;#39;&lt;/span&gt; = {
        $fileTable = New-Object System.Data.DataTable
        $fileTable.TableName = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;AllMuhFiles&amp;#34;&lt;/span&gt;

        &lt;span style=&#34;color:#66d9ef&#34;&gt;[void]&lt;/span&gt;$fileTable.Columns.Add(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;FileName&amp;#34;&lt;/span&gt;)
        &lt;span style=&#34;color:#66d9ef&#34;&gt;[void]&lt;/span&gt;$fileTable.Columns.Add(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Parent&amp;#34;&lt;/span&gt;)
        &lt;span style=&#34;color:#66d9ef&#34;&gt;[void]&lt;/span&gt;$fileTable.Columns.Add(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Extension&amp;#34;&lt;/span&gt;)
        &lt;span style=&#34;color:#66d9ef&#34;&gt;[void]&lt;/span&gt;$fileTable.Columns.Add(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;IsInf&amp;#34;&lt;/span&gt;)

        &lt;span style=&#34;color:#66d9ef&#34;&gt;ForEach&lt;/span&gt;($file &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt; $winFiles) {
            &lt;span style=&#34;color:#66d9ef&#34;&gt;[void]&lt;/span&gt;$fileTable.Rows.Add($file.Name, $file.Parent, $file.Extension)
        }

        $exeFiles = $fileTable.Select(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Extension like &amp;#39;.exe&amp;#39;&amp;#34;&lt;/span&gt;)
    }
    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;foreach&amp;#39;&lt;/span&gt; = {
        $exefiles = &lt;span style=&#34;color:#66d9ef&#34;&gt;foreach&lt;/span&gt; ($file &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt; $winFiles) {
            &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; ($file.Extension &lt;span style=&#34;color:#f92672&#34;&gt;-eq&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;.exe&amp;#39;&lt;/span&gt;) {
                $file
            }
        }
    }
}

$commands.Keys | &lt;span style=&#34;color:#66d9ef&#34;&gt;ForEach&lt;/span&gt;-Object {
    $testName = $_
    1..3 | &lt;span style=&#34;color:#66d9ef&#34;&gt;ForEach&lt;/span&gt;-Object {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;[PSCustomObject]&lt;/span&gt;@{
            TestName  = $testName
            Attempt   = $_
            ElapsedMS = (Measure-Command -Expression $commands[$testName]).TotalMilliseconds
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Results:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Testing Where-Object
2849.362
2926.2761
2876.9806

Testing .Where
1045.712
1037.4888
1031.191

Testing DataTable select
280.6466
272.8503
272.5341
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;I started looking in to DataTables because on large collections (hundreds of thousands sort of size) &lt;code&gt;Where-Object&lt;/code&gt; was slow. While the &lt;code&gt;Where()&lt;/code&gt; method was faster, both were nothing compared to DataTables.&lt;/p&gt;
&lt;p&gt;With that said, if a cmdlet has a -Filter parameter available to let you work directly with a provider, then use that. &amp;ldquo;Keep left&amp;rdquo; or &amp;ldquo;filter left, format right&amp;rdquo; are phrases I learnt and try to keep in mind when filtering.&lt;/p&gt;
&lt;p&gt;I abandoned the use of DataTables in the end as I didn&amp;rsquo;t need it. Even though they need additional set up, as you can see from the previous snippet, the results might be worth it in some cases.&lt;/p&gt;
&lt;p&gt;Resources I used to learn about filtering and the performance impact&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://4sysops.com/archives/where-object-vs-the-where-method-array-filtering-in-powershell/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Explains where-object and where, and the -filter for provider specific stuff&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://stackoverflow.com/questions/50956909/powershell-where-object-vs-where-method&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Explains the object type returned by where-object and where&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.jonathanmedd.net/2017/05/powershell-where-where-or-where.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Talks about &amp;ldquo;keeping left&amp;rdquo; for best performance. -Filter is king if available but only if you don&amp;rsquo;t want all the objects in an array for later consumption&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>ConfigMgr SQL Server Upgrade From 2012 SP4 to 2017 CU13</title>
        <link>https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/</link>
        <pubDate>Wed, 20 Mar 2019 00:00:00 +0100</pubDate>
        
        <guid>https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/</guid>
        <description>&lt;img src="https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/cover.jpg" alt="Featured image of post ConfigMgr SQL Server Upgrade From 2012 SP4 to 2017 CU13" /&gt;&lt;p&gt;Currently my lab&amp;rsquo;s primary site is running on 2012 R2. I recently wanted to try LEDBAT so I could sell it to a customer but it needed to be on 2016 or newer. I could have configured a 2016 &amp;ldquo;source DP&amp;rdquo; using pull distribution points and still get the experience, but then I was curious if IPU while ConfigMgr is installed was possible, &lt;a class=&#34;link&#34; href=&#34;https://docs.microsoft.com/en-us/sccm/core/servers/manage/upgrade-on-premises-infrastructure&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;turns out it is&lt;/a&gt;. Then I discovered I had SQL 2012 SP2 installed! So I bumped it to SP4. Then I thought, why not go to 2017?&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;ve applied service packs to SQL for ConfigMgr before but never a major release upgrade. Turns out, it&amp;rsquo;s straight forward!&lt;/p&gt;
&lt;p&gt;These are the resources I found useful and guided me:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://docs.microsoft.com/en-us/sql/sql-server/install/hardware-and-software-requirements-for-installing-sql-server?view=sql-server-2017&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Hardware and Software Requirements for Installing SQL Server&lt;/a&gt; - Microsoft&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://docs.microsoft.com/en-us/sql/database-engine/install-windows/supported-version-and-edition-upgrades?view=sql-server-2017%ef%bb%bf&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Supported Version and Edition Upgrades&lt;/a&gt; - Microsoft&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://docs.microsoft.com/en-us/sccm/core/plan-design/configs/support-for-sql-server-versions&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Supported SQL Server versions for Configuration Manager&lt;/a&gt; - Microsoft&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://docs.microsoft.com/en-us/sccm/core/servers/manage/configuring-reporting&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Configuring reporting in System Center Configuration Manager&lt;/a&gt; - Microsoft&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://sccmentor.com/2016/10/03/upgrading-your-sccm-site-database/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Upgrading your SCCM site database&lt;/a&gt; - Paul Winstanley&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.prajwaldesai.com/sccm-1606-upgrade-sql-server-2014-sql-server-2016/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;SCCM 1606 Upgrade SQL Server 2014 To SQL Server 2016&lt;/a&gt; -Prajwal Desai&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://sccm-zone.com/patching-mssql-with-sccm-fee8583eb6b6&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Patching SQL Server with SCCM&lt;/a&gt; - Octavian Cordos&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.anoopcnair.com/complete-guide-sccm-server-migration-part-1-sql-2017/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;The Complete Guide for SCCM Server Migration Part 1 â SQL 2017&lt;/a&gt; - Rajul OS&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;overview&#34;&gt;Overview&lt;/h2&gt;
&lt;p&gt;We&amp;rsquo;ll migrate custom reports, remove the Report Services Point role, install SSRS 2017, upgrade to SQL Server 2017, reinstall the Report Services Point role, and finally talk about anti-virus exclusions and new CE levels for your ConfigMgr db.&lt;/p&gt;
&lt;p&gt;Please don&amp;rsquo;t hate my SQL instance name. I started the environment off trying out a ConfigMgr database move so at the time I wanted the instance name to be distinctively different!&lt;/p&gt;
&lt;h2 id=&#34;sql-server-reporting-services-upgrade&#34;&gt;SQL Server Reporting Services Upgrade&lt;/h2&gt;
&lt;p&gt;SSRS is now a separate installer and the installation of SQL Server 2017 will remove any bundled SSRS components you have installed.&lt;/p&gt;
&lt;p&gt;So, how do we handle our current reports and ReportServer database?&lt;/p&gt;
&lt;h3 id=&#34;report-migration&#34;&gt;Report migration&lt;/h3&gt;
&lt;p&gt;If you google &amp;ldquo;sql reporting services migration&amp;rdquo; you&amp;rsquo;ll quickly learn many people have had a stab at this. Below are a few I&amp;rsquo;ve put together, though honestly, if you have a handful, just export the .rdl files manually and be done with it.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.sqlshack.com/migrating-ssrs-content-powershell/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Craig Porteous&lt;/a&gt; has a great write up talking about various ways to tackle this, strongly encourage you to read the post. Be sure to check out his method of tackling the problem using mostly PowerShell and the &lt;a class=&#34;link&#34; href=&#34;https://dbatools.io/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;dbatools&lt;/a&gt; module.&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.microsoft.com/en-gb/download/details.aspx?id=29560&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Reporting Services Migration Tool&lt;/a&gt; which is Microsoft&amp;rsquo;s own attempt at being a solution, made back in 2012 and not been touched since. As Craig mentions in his post, it&amp;rsquo;s written in PoSH and by default the target instance must be a SharePoint integrated instance - apparently easily modifiable to point to a regular SQL instance.&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://docs.microsoft.com/en-us/sql/reporting-services/tools/sample-reporting-services-rs-exe-script-to-copy-content-between-report-servers?view=sql-server-2017&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;RS.exe ssrs_migration.rss script&lt;/a&gt; is another Microsoft attempt, which looks like a more recent attempt.&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://code.google.com/archive/p/reportsync/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ReportSync&lt;/a&gt; which is an open source tool under MIT license, seemingly popular however it&amp;rsquo;s old and unloved&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.systemcenterdudes.com/sccm-reports-manager-tool/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;SCCM Report Manager Tool&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;reporting-service-point-role&#34;&gt;Reporting Service Point role&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;After you upgrade SQL Server, and SQL Server Reporting Services that is used as the data source for a reporting services point, you might experience errors when you run or edit reports from the Configuration Manager console. For reporting to work properly from the Configuration Manager console, you must remove the reporting services point site system role for the site and reinstall it. However, after the upgrade you can continue to run and edit reports successfully from an Internet browser.&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://docs.microsoft.com/en-us/sccm/core/servers/manage/configuring-reporting#upgrading-sql-server&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Configuring Reporting - Upgrading SQL Server&lt;/a&gt; - Microsoft&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;With that in mind, you may as well remove the RSP role before you start. There&amp;rsquo;s no harm in doing this after the upgrade, you&amp;rsquo;ll just get a moaning RSP component in console is all because it can&amp;rsquo;t start the SSRS service tied to the RSP that the install for SQL Server 2017 removed.&lt;/p&gt;
&lt;p&gt;Checkout &lt;code&gt;srsrp.log&lt;/code&gt;, &lt;code&gt;srsrpMSI.log&lt;/code&gt;, &lt;code&gt;srsrpsetup.log&lt;/code&gt; and &lt;code&gt;sitecomp.log&lt;/code&gt; if there are any issues with this.&lt;/p&gt;
&lt;h3 id=&#34;installing-ssrs-2017&#34;&gt;Installing SSRS 2017&lt;/h3&gt;
&lt;p&gt;Once you&amp;rsquo;ve decided what you want to do with your custom reports and removed the Reporting Service Point role, we can start installing SSRS 2017. You&amp;rsquo;ll need your SQL Server product key, check out &lt;a class=&#34;link&#34; href=&#34;https://docs.microsoft.com/en-us/sql/reporting-services/install-windows/find-reporting-services-product-key-ssrs?view=sql-server-2017&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;How to find the product key for SQL Server 2017 Reporting Services&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-01.jpg&#34; data-size=&#34;695x600&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hue0d0859f42226fe1b546172ee954fac6_78838_0d5315b8d6f19eeab2507615b1bd88e1.jpg 480w, https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hue0d0859f42226fe1b546172ee954fac6_78838_83d81c94d25148850607967c89390781.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-01.jpg&#34; width=&#34;695&#34; height=&#34;600&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt; &lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-02.jpg&#34; data-size=&#34;695x600&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hue0d0859f42226fe1b546172ee954fac6_53954_ad0ede09f5d51be7692b5a379dc89176.jpg 480w, https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hue0d0859f42226fe1b546172ee954fac6_53954_554ced12ea758ea30dca715db232fa12.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-02.jpg&#34; width=&#34;695&#34; height=&#34;600&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt; &lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-03.jpg&#34; data-size=&#34;695x600&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hue0d0859f42226fe1b546172ee954fac6_116046_b1f56d4c824f8f05c4c7c9dd222c0555.jpg 480w, https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hue0d0859f42226fe1b546172ee954fac6_116046_4f252661c0709cc393243df3b9db65c6.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-03.jpg&#34; width=&#34;695&#34; height=&#34;600&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt;
&lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-04.jpg&#34; data-size=&#34;695x600&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hue0d0859f42226fe1b546172ee954fac6_70211_83e6fa8e9c1bd144c8185b6b59dd2304.jpg 480w, https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hue0d0859f42226fe1b546172ee954fac6_70211_7a4194441d3ffc45bdeb19deee545ef5.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-04.jpg&#34; width=&#34;695&#34; height=&#34;600&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt; &lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-05.jpg&#34; data-size=&#34;695x600&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu254b537a3d8819baba45d97f12dbfd70_78405_16d312c6ed46f6b84a61f75539d510c3.jpg 480w, https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu254b537a3d8819baba45d97f12dbfd70_78405_b05830768cfa54c6bbd574d8f9475263.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-05.jpg&#34; width=&#34;695&#34; height=&#34;600&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt; &lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-06.jpg&#34; data-size=&#34;695x600&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu254b537a3d8819baba45d97f12dbfd70_52235_97f9fccc1c11a793a835328631afe03f.jpg 480w, https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu254b537a3d8819baba45d97f12dbfd70_52235_df550125ae838fd49048fe89fe4228a6.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-06.jpg&#34; width=&#34;695&#34; height=&#34;600&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;After install for SSRS 2017 you&amp;rsquo;ll have the option in configuration to create a new database or choose an existing one. As your current SSRS instance still exists you must create a new database with a unique name and also create a web service point with a unique name too.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;â¹ï¸ &lt;strong&gt;Note:&lt;/strong&gt; After entering data in any section ensure you hit &lt;code&gt;Apply&lt;/code&gt; at the bottom.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-07.jpg&#34; data-size=&#34;970x835&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu0a8dec6e5856eaaa4d8b6f2718b857fd_164255_d1edf36faa1b9453c5818a7321b8f5e6.jpg 480w, https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu0a8dec6e5856eaaa4d8b6f2718b857fd_164255_9d23ef90ac359c419db6ee6dd0bdc469.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-07.jpg&#34; width=&#34;970&#34; height=&#34;835&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt; &lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-08.jpg&#34; data-size=&#34;970x835&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu9fb30ddb1e97c0d54993ed73471dc2da_166900_8f3bd81ba61eafe07aa2476280c6413a.jpg 480w, https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu9fb30ddb1e97c0d54993ed73471dc2da_166900_4bc97f069e8444742ba8e3903120b7b1.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-08.jpg&#34; width=&#34;970&#34; height=&#34;835&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt; &lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-09.jpg&#34; data-size=&#34;970x835&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu9fb30ddb1e97c0d54993ed73471dc2da_187799_1896fafe9a45eebb4ed517916b3e4fa5.jpg 480w, https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu9fb30ddb1e97c0d54993ed73471dc2da_187799_a9a41cd52e1adfcff3259049fc950796.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-09.jpg&#34; width=&#34;970&#34; height=&#34;835&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-10.jpg&#34; data-size=&#34;970x835&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu96b96c935e825b48f14cc68b85739df2_188813_97091227a8590672bfd56226ba62f676.jpg 480w, https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu96b96c935e825b48f14cc68b85739df2_188813_61c6dd1b2d4fc21023a4c1249359bb41.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-10.jpg&#34; width=&#34;970&#34; height=&#34;835&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt; &lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-11.jpg&#34; data-size=&#34;970x835&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu96b96c935e825b48f14cc68b85739df2_196934_4a5d5b6883add083a3cb329aa02a19e9.jpg 480w, https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu96b96c935e825b48f14cc68b85739df2_196934_0b1d708d93bda7b47d9b0bb93a7069ee.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-11.jpg&#34; width=&#34;970&#34; height=&#34;835&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt; &lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-12.jpg&#34; data-size=&#34;970x835&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu96b96c935e825b48f14cc68b85739df2_189364_5efae39afcb69050cca6c7963f2a4c39.jpg 480w, https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu96b96c935e825b48f14cc68b85739df2_189364_3fd46d678f60cad94025da9237c32f1c.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-12.jpg&#34; width=&#34;970&#34; height=&#34;835&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt; &lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-13.jpg&#34; data-size=&#34;970x835&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu96b96c935e825b48f14cc68b85739df2_201783_7a18cd3fbdd290e4f759e30cf8462cc1.jpg 480w, https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu96b96c935e825b48f14cc68b85739df2_201783_3fc6b54580b0252100ee80519d44c883.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-13.jpg&#34; width=&#34;970&#34; height=&#34;835&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-14.jpg&#34; data-size=&#34;970x835&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu96b96c935e825b48f14cc68b85739df2_205872_32f966fa69c9b716a313c34c9d5dbf70.jpg 480w, https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu96b96c935e825b48f14cc68b85739df2_205872_b6676856ab0aa7fc720de11b1f65cd9b.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-14.jpg&#34; width=&#34;970&#34; height=&#34;835&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt; &lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-15.jpg&#34; data-size=&#34;970x835&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu96b96c935e825b48f14cc68b85739df2_207524_b8ba64aed7b7f2a1d13bd03897d7e68d.jpg 480w, https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu96b96c935e825b48f14cc68b85739df2_207524_8360c6aca419bbbdd8d442c8e2316746.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-15.jpg&#34; width=&#34;970&#34; height=&#34;835&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt; &lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-16.jpg&#34; data-size=&#34;970x835&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu9fb30ddb1e97c0d54993ed73471dc2da_204303_c818769c0843deaa545cff0105e8a206.jpg 480w, https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu9fb30ddb1e97c0d54993ed73471dc2da_204303_265d3eabe56d59ed5f30f6867bdff2a1.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-16.jpg&#34; width=&#34;970&#34; height=&#34;835&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt; &lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-17.jpg&#34; data-size=&#34;970x835&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu9fb30ddb1e97c0d54993ed73471dc2da_157801_bf2f12b911bb22c9ac8c349f7011df2b.jpg 480w, https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu9fb30ddb1e97c0d54993ed73471dc2da_157801_b565f35f31a897e6558d0f613be8524a.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-17.jpg&#34; width=&#34;970&#34; height=&#34;835&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt; &lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-18.jpg&#34; data-size=&#34;970x835&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu9fb30ddb1e97c0d54993ed73471dc2da_207581_7d27eaf1e8750ec9acaad44fb40c902e.jpg 480w, https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu9fb30ddb1e97c0d54993ed73471dc2da_207581_2b5e7468ce60768589647697a806c9a5.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-18.jpg&#34; width=&#34;970&#34; height=&#34;835&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&#34;sql-server-upgrade&#34;&gt;SQL Server Upgrade&lt;/h2&gt;
&lt;p&gt;Now we can get started upgrading the DB engine.&lt;/p&gt;
&lt;p&gt;Start off by stopping and disabling all ConfigMgr services until we&amp;rsquo;re ready. I disabled mine in case I needed to reboot and didn&amp;rsquo;t want to run the risk of ConfigMgr running on an unsupported SQL backend in fear of the gremlins.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-powershell&#34; data-lang=&#34;powershell&#34;&gt;$Services = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;SMS_EXECUTIVE&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;SMS_NOTIFICATION_SERVER&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;SMS_SITE_BACKUP&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;SMS_SITE_COMPONENT_MANAGER&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;SMS_SITE_SQL_BACKUP&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;SMS_SITE_VSS_WRITER&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;CONFIGURATION_MANAGER_UPDATE&amp;#34;&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;ForEach&lt;/span&gt; ($Service &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt; $Services) { 
    Write-Host &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;$($Service)&lt;span style=&#34;color:#e6db74&#34;&gt;: &lt;/span&gt;$((Get-Service -Name $Service).StartType)&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;
    Stop-Service -Name $Service -Force 
    Set-Service -Name $Service -StartupType Disabled
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;installing-sql-server-2017&#34;&gt;Installing SQL Server 2017&lt;/h3&gt;
&lt;p&gt;Run &lt;code&gt;setup.exe&lt;/code&gt; in the installation media and work your way through the wizard:&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-19.jpg&#34; data-size=&#34;800x600&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu748fdd3920f7109198b1c3b017355ef3_236613_072f21b80d59583c18196bd82b420454.jpg 480w, https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu748fdd3920f7109198b1c3b017355ef3_236613_e17de7890a21fa1c7ba70980f6f0b924.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-19.jpg&#34; width=&#34;800&#34; height=&#34;600&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt; &lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-20.jpg&#34; data-size=&#34;820x615&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hua461740be7dec8a9e1839bf1ed7d7eed_154309_ebd8af20878b35a8223a3419e4249e08.jpg 480w, https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hua461740be7dec8a9e1839bf1ed7d7eed_154309_4d0f3fcc75e178f748dc50fad0abe288.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-20.jpg&#34; width=&#34;820&#34; height=&#34;615&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt; &lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-21.jpg&#34; data-size=&#34;820x615&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hua461740be7dec8a9e1839bf1ed7d7eed_166326_d6486a0ea89d48fc7502abd34e4b993b.jpg 480w, https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hua461740be7dec8a9e1839bf1ed7d7eed_166326_884aef60e206a6ecbd88f5f3086dbe0b.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-21.jpg&#34; width=&#34;820&#34; height=&#34;615&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt; &lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-22.jpg&#34; data-size=&#34;820x615&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hua461740be7dec8a9e1839bf1ed7d7eed_121170_4ad0c1fdacee96c2aa1b754b4668c8c9.jpg 480w, https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hua461740be7dec8a9e1839bf1ed7d7eed_121170_dd7545cbf0f9ca87c7a81cd60a3ac31a.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-22.jpg&#34; width=&#34;820&#34; height=&#34;615&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt; &lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-23.jpg&#34; data-size=&#34;820x615&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hua461740be7dec8a9e1839bf1ed7d7eed_129539_f52a6c77f925dd25acb0e02378581fe5.jpg 480w, https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hua461740be7dec8a9e1839bf1ed7d7eed_129539_c20dd20185dc354b12e9db89e4e58ee7.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-23.jpg&#34; width=&#34;820&#34; height=&#34;615&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-24.jpg&#34; data-size=&#34;820x615&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hua461740be7dec8a9e1839bf1ed7d7eed_142083_bc379a2199b8185bc2095b36c325c05e.jpg 480w, https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hua461740be7dec8a9e1839bf1ed7d7eed_142083_cd2d81efdd4c9b16a885588b9910328c.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-24.jpg&#34; width=&#34;820&#34; height=&#34;615&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt; &lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-25.jpg&#34; data-size=&#34;820x615&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu439fd993af529c0fec507668f7f8c9ae_129684_b9854629ab1c328033c557f390d6f5d9.jpg 480w, https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu439fd993af529c0fec507668f7f8c9ae_129684_30300e3e043c7685b203b3e24e11538a.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-25.jpg&#34; width=&#34;820&#34; height=&#34;615&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt; &lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-26.jpg&#34; data-size=&#34;820x615&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_huac589cb721b09482fa62cf122844837b_148802_ec19b20b6236388d87fa9edef93e5315.jpg 480w, https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_huac589cb721b09482fa62cf122844837b_148802_00c3c6bd1cc555d6c800b03900e6f992.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-26.jpg&#34; width=&#34;820&#34; height=&#34;615&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt; &lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-27.jpg&#34; data-size=&#34;820x615&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hufc9a19eef668ff067a88236ccbbe4f0b_162509_ba58085cc20cebfe86f1f5b28bc6c847.jpg 480w, https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hufc9a19eef668ff067a88236ccbbe4f0b_162509_a1ff827ab9662eb68d17e8f6c380e117.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-27.jpg&#34; width=&#34;820&#34; height=&#34;615&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt; &lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-28.jpg&#34; data-size=&#34;820x615&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hua461740be7dec8a9e1839bf1ed7d7eed_146315_9b4d8298805e991c84868f7ea106f6d9.jpg 480w, https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hua461740be7dec8a9e1839bf1ed7d7eed_146315_7b0b0786049721d904f8068243290f5f.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-28.jpg&#34; width=&#34;820&#34; height=&#34;615&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;I want to point out that I ran through this process three times and played hot potato with the &amp;ldquo;&lt;em&gt;Use Microsoft Update to check for updates (recommended)&lt;/em&gt;&amp;rdquo; and I found it did not install any cumulative updates.&lt;/p&gt;
&lt;p&gt;Restart ð&lt;/p&gt;
&lt;p&gt;At this point I&amp;rsquo;m at RTM build number:&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-29.jpg&#34; data-size=&#34;1912x722&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu77bfc6a04f0287b3b6eba66f7a9256e0_330252_9c898ce21095f98012d93c1f9aa2f355.jpg 480w, https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu77bfc6a04f0287b3b6eba66f7a9256e0_330252_fe098e66771b1af68b7adccf0d2e5f40.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-29.jpg&#34; width=&#34;1912&#34; height=&#34;722&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Which at the time of writing this, that is not supported for ConfigMgr. Minimum CU2 is needed for SQL Server 2017:&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/2019-03-20_12-23-22.jpg&#34; data-size=&#34;920x197&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/2019-03-20_12-23-22_hu83f7a27f1571dbe645dfb16989b7bbb3_51095_480x0_resize_q75_box.jpg 480w, https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/2019-03-20_12-23-22_hu83f7a27f1571dbe645dfb16989b7bbb3_51095_1024x0_resize_q75_box.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/2019-03-20_12-23-22.jpg&#34; width=&#34;920&#34; height=&#34;197&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://docs.microsoft.com/en-us/sccm/core/plan-design/configs/support-for-sql-server-versions&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Supported SQL Server versions for Configuration Manager&lt;/a&gt; - Microsoft&lt;/p&gt;
&lt;p&gt;Run through the CU wizard, for me this was CU 13 which took me to 14.0.3048:&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-30.jpg&#34; data-size=&#34;820x615&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hua461740be7dec8a9e1839bf1ed7d7eed_106621_b3d3229ecfd7c6375e799c21d1b4dbe1.jpg 480w, https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hua461740be7dec8a9e1839bf1ed7d7eed_106621_19c579a41afa847f2e7bf55d7ab6057d.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-30.jpg&#34; width=&#34;820&#34; height=&#34;615&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt; &lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-31.jpg&#34; data-size=&#34;820x615&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hua461740be7dec8a9e1839bf1ed7d7eed_152304_497719c21a2a30e39ffaf01734eadba3.jpg 480w, https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hua461740be7dec8a9e1839bf1ed7d7eed_152304_7375f8fdd5aa252337a19ddf0bf6cc7e.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-31.jpg&#34; width=&#34;820&#34; height=&#34;615&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt; &lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-32.jpg&#34; data-size=&#34;820x615&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hua461740be7dec8a9e1839bf1ed7d7eed_100148_b21305fa304d3d04619bd11cfa561389.jpg 480w, https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hua461740be7dec8a9e1839bf1ed7d7eed_100148_dfd3258106ec7f25bec168a85fcd749c.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-32.jpg&#34; width=&#34;820&#34; height=&#34;615&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt; &lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-33.jpg&#34; data-size=&#34;820x615&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu0c642186e73e4d732c320df70c606581_94228_80d7c62fb236193ac935daeac97c6988.jpg 480w, https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu0c642186e73e4d732c320df70c606581_94228_427e4bd5307068a8cab457f97ce63082.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-33.jpg&#34; width=&#34;820&#34; height=&#34;615&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt; &lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-34.jpg&#34; data-size=&#34;820x615&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu0c642186e73e4d732c320df70c606581_119634_5b06369e8765f59b706dbc01b5a02d21.jpg 480w, https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu0c642186e73e4d732c320df70c606581_119634_df35b23231e214a9aca23f4a43221d61.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-34.jpg&#34; width=&#34;820&#34; height=&#34;615&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt; &lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-35.jpg&#34; data-size=&#34;820x615&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_huc250b0f784ee474e91a5f16fa5f16659_127964_9738c63055a79fc0fde808a180df3009.jpg 480w, https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_huc250b0f784ee474e91a5f16fa5f16659_127964_f2eea7d082867176152c1fc0f765c50b.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-35.jpg&#34; width=&#34;820&#34; height=&#34;615&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Restart ð&lt;/p&gt;
&lt;p&gt;Restore the services startup types back to what they were and do one more final reboot to ensure all needed services start normally:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-powershell&#34; data-lang=&#34;powershell&#34;&gt;$Services = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;SMS_EXECUTIVE&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;SMS_NOTIFICATION_SERVER&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;SMS_SITE_BACKUP&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;SMS_SITE_COMPONENT_MANAGER&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;SMS_SITE_SQL_BACKUP&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;SMS_SITE_VSS_WRITER&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;CONFIGURATION_MANAGER_UPDATE&amp;#34;&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;ForEach&lt;/span&gt; ($Service &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt; $Services) {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;If&lt;/span&gt; ((&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;SMS_NOTIFICATION_SERVER&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;SMS_SITE_BACKUP&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;-contains&lt;/span&gt; $Service) { 
        Set-Service -Name $Service -StartupType Manual 
    } 
    &lt;span style=&#34;color:#66d9ef&#34;&gt;Else&lt;/span&gt; {
        Set-Service -Name $Service -StartupType Automatic
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;If there are issues with the site connecting to the database, you will most likely see messages of interest in:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Log file name&lt;/th&gt;
&lt;th&gt;Description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;smsprov.log&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Records WMI provider access to the site database.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;smsdbmon.log&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Records database changes.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;statmgr.log&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Records the writing of all status messages to the database.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://docs.microsoft.com/en-us/sccm/core/plan-design/hierarchy/log-files&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Log files for troubleshooting&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;reinstall-report-services-point-role&#34;&gt;Reinstall Report Services Point role&lt;/h3&gt;
&lt;p&gt;Now you should be good to go by adding back the RSP!&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-36.jpg&#34; data-size=&#34;1912x722&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu8393eb79a45d1c7dd36a5bc81c951bd5_317789_b34ab39e431496d30d98634c9ba350fa.jpg 480w, https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu8393eb79a45d1c7dd36a5bc81c951bd5_317789_9ae16f44a93ede875c5d7df0192076b8.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-36.jpg&#34; width=&#34;1912&#34; height=&#34;722&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt; &lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-37.jpg&#34; data-size=&#34;1633x843&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hub593c8f8acbcbcd8ad79f6b7924e3f0a_188014_aa47061fb3777805bb46ffb62b6ffca2.jpg 480w, https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hub593c8f8acbcbcd8ad79f6b7924e3f0a_188014_2b13a18fbb48be96da13ad9eb33ef98e.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-37.jpg&#34; width=&#34;1633&#34; height=&#34;843&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt; &lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-38.jpg&#34; data-size=&#34;863x750&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu740cbe3f7e0ddd994417d791697c1031_133870_0c72c3d7ebdf87c7f884218ba78a46e7.jpg 480w, https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu740cbe3f7e0ddd994417d791697c1031_133870_1a4e0feefcb929374544c5640c07b2e4.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-38.jpg&#34; width=&#34;863&#34; height=&#34;750&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Again, checkout &lt;code&gt;srsrp.log&lt;/code&gt;, &lt;code&gt;srsrpMSI.log&lt;/code&gt;, &lt;code&gt;srsrpsetup.log&lt;/code&gt; and &lt;code&gt;sitecomp.log&lt;/code&gt; if there are any issues with this.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;â¹ï¸ &lt;strong&gt;Note:&lt;/strong&gt; Reports may take a little while to appear in console, you can monitor the progress of them being generated in &lt;code&gt;srsrp.log&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;post-sql-upgrade-tasks&#34;&gt;Post SQL upgrade tasks&lt;/h2&gt;
&lt;h3 id=&#34;antivirus-exclusions&#34;&gt;Antivirus exclusions&lt;/h3&gt;
&lt;p&gt;Slightly off-topic, but &lt;a class=&#34;link&#34; href=&#34;https://social.technet.microsoft.com/wiki/contents/articles/953.microsoft-anti-virus-exclusion-list.aspx&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;bookmark this link&lt;/a&gt; right now.&lt;/p&gt;
&lt;p&gt;Back on-topic. This is somewhat obvious but can easily be forgotten: update your exclusion rules to reflect new paths for SQL Server + SSRS 2017!&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://blogs.technet.microsoft.com/systemcenterpfe/2017/05/24/configuration-manager-current-branch-antivirus-update/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Configuration Manager Current Branch Antivirus Exclusions&lt;/a&gt; - Microsoft&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;cardinality-estimation&#34;&gt;Cardinality Estimation&lt;/h3&gt;
&lt;p&gt;I recently saw a tweet by Umair Khan:&lt;/p&gt;
&lt;blockquote&gt;
&lt;blockquote class=&#34;twitter-tweet&#34;&gt;&lt;p lang=&#34;en&#34; dir=&#34;ltr&#34;&gt;ConfigMgr Current branch (1810+) guidance for the SQL CE levels with various SQL versions &lt;a href=&#34;https://t.co/0M2lryd3FJ&#34;&gt;https://t.co/0M2lryd3FJ&lt;/a&gt;&lt;a href=&#34;https://twitter.com/hashtag/ConfigMgr?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#ConfigMgr&lt;/a&gt; &lt;a href=&#34;https://twitter.com/hashtag/CardinalityEstimation?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#CardinalityEstimation&lt;/a&gt; &lt;a href=&#34;https://twitter.com/hashtag/SQL?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#SQL&lt;/a&gt;&lt;/p&gt;&amp;mdash; ððððð ðºððð [ððº] (@TheFrankUK) &lt;a href=&#34;https://twitter.com/TheFrankUK/status/1090416130496389120?ref_src=twsrc%5Etfw&#34;&gt;January 30, 2019&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src=&#34;https://platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;

&lt;/blockquote&gt;
&lt;p&gt;The &lt;a class=&#34;link&#34; href=&#34;https://techcommunity.microsoft.com/t5/configuration-manager-archive/configmgr-current-branch-1810-guidance-for-the-sql-ce-levels/ba-p/339962&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;referenced blog&lt;/a&gt; post taught me what Cardinality Estimation is and what Umair&amp;rsquo;s guidance means. I highly encourage you to read it if you&amp;rsquo;ve just updated from an old SQL version to 2017.&lt;/p&gt;
&lt;p&gt;As a result you may want to update your ConfigMgr DB backend CE level to something like 140. As I upgraded away from 2012, my ConfigMgr DB and new ReportServer2017 DB was CE level was 110.&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-40.jpg&#34; data-size=&#34;1645x828&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu16bf6961ffc72ca0b129db9cdadcc7ca_300404_07ac90257d4fc121d338223317659ad9.jpg 480w, https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/_hu16bf6961ffc72ca0b129db9cdadcc7ca_300404_c2604a3d9cd9c11e1598663133ec51ec.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13/images/configmgr-sql-server-upgrade-from-2012-sp4-to-2017-cu13-40.jpg&#34; width=&#34;1645&#34; height=&#34;828&#34; loading=&#34;lazy&#34;
				alt=&#34;&amp;nbsp;&#34;&gt;
		&lt;/a&gt;
		
	&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;You can read up more on Cardinality Estimation and guidance on how to change your CE level here:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://docs.microsoft.com/en-us/sql/relational-databases/performance/cardinality-estimation-sql-server?view=sql-server-2017&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Cardinality Estimation (SQL Server)&lt;/a&gt; - Microsoft&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;final-comments&#34;&gt;Final comments&lt;/h2&gt;
&lt;p&gt;I started off with SSRS first before SQL Server because I didn&amp;rsquo;t want anyone following this post having removed their SSRS instance with a boat load of custom reports without realising the impact. I figured if I made the needed warnings first then it would be safer for you.&lt;/p&gt;
&lt;p&gt;The added benefits of doing SSRS after SQL upgrade is, I guess, are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;the CE level for ReportServer DB would default to latest&lt;/li&gt;
&lt;li&gt;the ability to use the current web URLs and maybe even database name too, if you&amp;rsquo;re brave enough to delete/rename the original&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>ConfigMgr Throttling Distribution Point Bandwidth</title>
        <link>https://adamcook.io/p/configmgr-throttling-distribution-point-bandwidth/</link>
        <pubDate>Sun, 17 Feb 2019 00:00:00 +0100</pubDate>
        
        <guid>https://adamcook.io/p/configmgr-throttling-distribution-point-bandwidth/</guid>
        <description>&lt;img src="https://adamcook.io/p/configmgr-throttling-distribution-point-bandwidth/images/configmgr-throttling-distribution-point-bandwidth-04.jpg" alt="Featured image of post ConfigMgr Throttling Distribution Point Bandwidth" /&gt;&lt;blockquote&gt;
&lt;p&gt;â¹ï¸ It looks like as I was writing this Microsoft have just publicly released a former internal document detailing some things that I had claimed to be undocumented (&lt;a class=&#34;link&#34; href=&#34;https://support.microsoft.com/en-us/help/4482728/understand-troubleshoot-content-distribution-in-configuration-manager&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;click here&lt;/a&gt;):
&lt;blockquote class=&#34;twitter-tweet&#34;&gt;&lt;p lang=&#34;en&#34; dir=&#34;ltr&#34;&gt;Deep, deep, DEEP dive into content distribution in &lt;a href=&#34;https://twitter.com/hashtag/SCCM?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#SCCM&lt;/a&gt; by the great &lt;a href=&#34;https://twitter.com/vinay_pamnani?ref_src=twsrc%5Etfw&#34;&gt;@vinay_pamnani&lt;/a&gt;   Internal-only content originally, now free for public use! &lt;a href=&#34;https://t.co/oUPTSzrTmt&#34;&gt;https://t.co/oUPTSzrTmt&lt;/a&gt;&lt;/p&gt;&amp;mdash; Matt Toto (@_contoto) &lt;a href=&#34;https://twitter.com/_contoto/status/1092469116349440003?ref_src=twsrc%5Etfw&#34;&gt;February 4, 2019&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src=&#34;https://platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;In this post I&amp;rsquo;ll cover ways you can control bandwidth for Configuration Manager using the rate limit config available for each distribution point. Outside of rate limits, a modern approach to traffic shaping content distribution to DPs is LEDBAT. &lt;a class=&#34;link&#34; href=&#34;https://deploymentresearch.com/Research/Post/657/LEDBAT-with-ConfigMgr-Pure-Love-By-Daniel-Olsson&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Read this great write up&lt;/a&gt; by &lt;a class=&#34;link&#34; href=&#34;https://deploymentresearch.com/Research/Post/657/LEDBAT-with-ConfigMgr-Pure-Love-By-Daniel-Olsson&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Daniel Olsson&lt;/a&gt; for more LEDBAT info in this use case.&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-throttling-distribution-point-bandwidth/images/configmgr-throttling-distribution-point-bandwidth-01.jpg&#34; data-size=&#34;688x636&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-throttling-distribution-point-bandwidth/images/configmgr-throttling-distribution-point-bandwidth-01_hu0bf41bd5756ea95c2802a66b5baf5007_53945_480x0_resize_q75_box.jpg 480w, https://adamcook.io/p/configmgr-throttling-distribution-point-bandwidth/images/configmgr-throttling-distribution-point-bandwidth-01_hu0bf41bd5756ea95c2802a66b5baf5007_53945_1024x0_resize_q75_box.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-throttling-distribution-point-bandwidth/images/configmgr-throttling-distribution-point-bandwidth-01.jpg&#34; width=&#34;688&#34; height=&#34;636&#34; loading=&#34;lazy&#34;
				alt=&#34;Distribution Point rate limits&#34;&gt;
		&lt;/a&gt;
		
		&lt;figcaption&gt;Distribution Point rate limits&lt;/figcaption&gt;
		
	&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;How familiar are you with the difference between the options &amp;ldquo;pulse mode&amp;rdquo; and &amp;ldquo;limited to specified maximum transfer per hour&amp;rdquo;? I wasn&amp;rsquo;t sure up until recently, and like me you may have misunderstood the % you&amp;rsquo;re applying for each hour slot, when you may want pulse mode instead.&lt;/p&gt;
&lt;h2 id=&#34;pulse-mode&#34;&gt;Pulse mode&lt;/h2&gt;
&lt;p&gt;Pulse mode is simple. Pump out x sized data block every y seconds. Unfortunately, the maximum data block size is 256KB - enabling you to set a maximum cap of 2Mbps - so I support &lt;a class=&#34;link&#34; href=&#34;https://configurationmanager.uservoice.com/forums/300492-ideas/suggestions/36773581-increase-block-size-for-pulse-mode-distribution-p&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&amp;lsquo;Increase block size for pulse mode (distribution point rate limit)&#39;&lt;/a&gt;, do you?&lt;/p&gt;
&lt;h2 id=&#34;limited-to-specified-maximum-transfer-per-hour&#34;&gt;Limited to specified maximum transfer per hour&lt;/h2&gt;
&lt;p&gt;As for &amp;ldquo;limited to specified maximum transfer per hour&amp;rdquo;&amp;hellip; Turns out the % you apply for each hour is strictly relevant to how long for Configuration Manager can send using 100% available bandwidth, following by the how long Configuration Manager will not transmit data for, during that hour slot. The &lt;a class=&#34;link&#34; href=&#34;https://docs.microsoft.com/en-us/sccm/core/servers/deploy/configure/install-and-configure-distribution-points#bkmk_config-rate&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;documentation&lt;/a&gt; explains this well.&lt;/p&gt;
&lt;p&gt;However it does not explain the behaviour. For example, if you configured it to be 50/50, does this mean it&amp;rsquo;s pumping content flat out for 30 consecutive minutes of the hour and dead quiet for the other 30 conseuctive minutes? Perhaps that&amp;rsquo;s too much detail to care for and simply knowing that the DP will go full-pelt for 50% of the hour is good enough for you. But I was curious.&lt;/p&gt;
&lt;p&gt;In my lab, I set a distribution point&amp;rsquo;s &amp;ldquo;limit to specified maximum transfer per hour&amp;rdquo; to 10%. On the SCCM VM I set a bandwidth maximum limit of 10Mbps, in Hyper-V this is only for outbound traffic but that&amp;rsquo;s OK it&amp;rsquo;s what I&amp;rsquo;m testing. The bandwidth limit is mostly so I can transfer a 12GB package and make it run for long enough to watch what&amp;rsquo;s going on.&lt;/p&gt;
&lt;p&gt;With perfmon I wanted to cover 3600 seconds, and being limited to just 1000 samples, I could only go down to 1 sample every 4 seconds.&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-throttling-distribution-point-bandwidth/images/configmgr-throttling-distribution-point-bandwidth-02.jpg&#34; data-size=&#34;1401x553&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-throttling-distribution-point-bandwidth/images/configmgr-throttling-distribution-point-bandwidth-02_hu75f2d1fa595ae38c3f4f7fe78330a8c9_168011_480x0_resize_q75_box.jpg 480w, https://adamcook.io/p/configmgr-throttling-distribution-point-bandwidth/images/configmgr-throttling-distribution-point-bandwidth-02_hu75f2d1fa595ae38c3f4f7fe78330a8c9_168011_1024x0_resize_q75_box.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-throttling-distribution-point-bandwidth/images/configmgr-throttling-distribution-point-bandwidth-02.jpg&#34; width=&#34;1401&#34; height=&#34;553&#34; loading=&#34;lazy&#34;
				alt=&#34;PkgXferMgr.log&#34;&gt;
		&lt;/a&gt;
		
		&lt;figcaption&gt;PkgXferMgr.log&lt;/figcaption&gt;
		
	&lt;/figure&gt; &lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-throttling-distribution-point-bandwidth/images/configmgr-throttling-distribution-point-bandwidth-03.jpg&#34; data-size=&#34;1401x553&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-throttling-distribution-point-bandwidth/images/configmgr-throttling-distribution-point-bandwidth-03_hudd5017d5b504d060beea5d3cedf9193c_190417_480x0_resize_q75_box.jpg 480w, https://adamcook.io/p/configmgr-throttling-distribution-point-bandwidth/images/configmgr-throttling-distribution-point-bandwidth-03_hudd5017d5b504d060beea5d3cedf9193c_190417_1024x0_resize_q75_box.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-throttling-distribution-point-bandwidth/images/configmgr-throttling-distribution-point-bandwidth-03.jpg&#34; width=&#34;1401&#34; height=&#34;553&#34; loading=&#34;lazy&#34;
				alt=&#34;PkgXferMgr.log&#34;&gt;
		&lt;/a&gt;
		
		&lt;figcaption&gt;PkgXferMgr.log&lt;/figcaption&gt;
		
	&lt;/figure&gt; &lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-throttling-distribution-point-bandwidth/images/configmgr-throttling-distribution-point-bandwidth-04.jpg&#34; data-size=&#34;1669x663&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-throttling-distribution-point-bandwidth/images/configmgr-throttling-distribution-point-bandwidth-04_hu4d744b3ee3a02480a5bb7c9cf1213178_96508_480x0_resize_q75_box.jpg 480w, https://adamcook.io/p/configmgr-throttling-distribution-point-bandwidth/images/configmgr-throttling-distribution-point-bandwidth-04_hu4d744b3ee3a02480a5bb7c9cf1213178_96508_1024x0_resize_q75_box.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-throttling-distribution-point-bandwidth/images/configmgr-throttling-distribution-point-bandwidth-04.jpg&#34; width=&#34;1669&#34; height=&#34;663&#34; loading=&#34;lazy&#34;
				alt=&#34;perfmon&#34;&gt;
		&lt;/a&gt;
		
		&lt;figcaption&gt;perfmon&lt;/figcaption&gt;
		
	&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;After a few minutes of watching perfmon, task manager and resource monitor, it became clear that perfmon&amp;rsquo;s graph is not a true reflection. While it shows the behaviour, but it doesn&amp;rsquo;t show that Configuration Manager was actually pulsing at 10Mbps (or near abouts). The perfmon graph, and the calculations made by
SMS_PACKAGE_TRANSFER_MANAGER seemed to be perfectly time so perfmon could not plot/sample the peak of each pulse.&lt;/p&gt;
&lt;p&gt;I could have covered fewer seconds and sampled every 1 second and maybe caught the pulses in the graph. But the demonstration was to monitor the behaviour for the configured hour slot. So no, I wanted to look at the results for the last hour.&lt;/p&gt;
&lt;p&gt;From the above two log file snippets, I&amp;rsquo;ve learnt that SMS_PACKAGE_TRANSFER_MANAGER:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Determines current available bandwidth capacity&lt;/li&gt;
&lt;li&gt;By knowing the current available bandwidth capacity, calculate when the next pulse will be, while still satisfying the config applied by admin (in my case, 10%)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;So it&amp;rsquo;s not black and white like I first thought, e.g. flat out for 10% of the hour and quiet for the remainder. From what I&amp;rsquo;ve learnt I appreciate the current behaviour is probably most ideal; it doesn&amp;rsquo;t create prolonged periods of congestion.&lt;/p&gt;
&lt;p&gt;With the current limitation of pulse mode (256KB block size), using this config could enable you to create a greater average. However, for brief moments of time during the hour you may still saturate bandwidth at either end causing spikes of latency â albeit for a second, not even that.&lt;/p&gt;
&lt;h2 id=&#34;no-concurrent-transfers-to-a-distribution-point-while-it-has-any-rate-limit-defined&#34;&gt;No concurrent transfers to a distribution point while it has any rate limit defined&lt;/h2&gt;
&lt;p&gt;Something you may also not be aware of is the behaviour of SMS_DISTRIBUTION_MANAGER when you configure any rate limit.&lt;/p&gt;
&lt;p&gt;The &lt;a class=&#34;link&#34; href=&#34;https://docs.microsoft.com/en-us/sccm/core/servers/deploy/configure/install-and-configure-distribution-points#bkmk_config-rate&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;documentation&lt;/a&gt; doesn&amp;rsquo;t yet say this, and I gave feedback, but when you configure any rate limit â whether pulse mode or the other â only one package will transfer at a time to that distribution point. Anything you had configured in the properties for the Software Distribution Component will be ignored.&lt;/p&gt;
&lt;p&gt;It&amp;rsquo;s not a huge unknown. If you&amp;rsquo;re experienced then you may have known this already. However I have
(at the time of writing this) three years experience and I had no idea. I only discovered it while learning about the âlimited to specified maximum transfer per hourâ discussed in last section from a &lt;a class=&#34;link&#34; href=&#34;https://www.experts-exchange.com/articles/12177/SCCM-2012-How-Rate-Limiting-Pulse-Mode-saved-the-day.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;great write up here&lt;/a&gt; by &lt;a class=&#34;link&#34; href=&#34;https://twitter.com/sccmcanuck&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Chris Nienabar&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&#34;software-distribution-component&#34;&gt;Software Distribution Component&lt;/h2&gt;
&lt;p&gt;This brings me on to the two relevant options in the Software Distribution Component.&lt;/p&gt;
&lt;p&gt;Where are the properties for the Software Distribution Component? Administratrtion &amp;gt; Sites &amp;gt; select your site &amp;gt; Configure Site Components &amp;gt; Software Distribution Components&lt;/p&gt;
&lt;p&gt;The two key options here are &lt;strong&gt;Maximum number of packages&lt;/strong&gt; and &lt;strong&gt;Maximum threads per package&lt;/strong&gt;. This is what &lt;a class=&#34;link&#34; href=&#34;https://docs.microsoft.com/en-us/sccm/core/servers/deploy/configure/site-components#software-distribution&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;the documentation&lt;/a&gt; has to say about it:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;On the General tab, specify settings that modify how the site server transfers content to its distribution points. When you increase the values you use for concurrent distribution settings, content distribution can use more network bandwidth.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-throttling-distribution-point-bandwidth/images/configmgr-throttling-distribution-point-bandwidth-05.jpg&#34; data-size=&#34;528x545&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-throttling-distribution-point-bandwidth/images/configmgr-throttling-distribution-point-bandwidth-05_hu4d3a1ede020e46eff141717f3a23ff3a_125751_480x0_resize_q75_box.jpg 480w, https://adamcook.io/p/configmgr-throttling-distribution-point-bandwidth/images/configmgr-throttling-distribution-point-bandwidth-05_hu4d3a1ede020e46eff141717f3a23ff3a_125751_1024x0_resize_q75_box.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-throttling-distribution-point-bandwidth/images/configmgr-throttling-distribution-point-bandwidth-05.jpg&#34; width=&#34;528&#34; height=&#34;545&#34; loading=&#34;lazy&#34;
				alt=&#34;Software Distribution Component Properties&#34;&gt;
		&lt;/a&gt;
		
		&lt;figcaption&gt;Software Distribution Component Properties&lt;/figcaption&gt;
		
	&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;I don&amp;rsquo;t want to come across like I&amp;rsquo;m hating on Microsoft&amp;rsquo;s documentation because &lt;a class=&#34;link&#34; href=&#34;https://twitter.com/AaronCzechowski&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;I see this dude&amp;rsquo;s tweets&lt;/a&gt; and I can tell hard work goes in to making things as great as they are. But hopefully I&amp;rsquo;ll have an opportunity here to further explain these two options, probably moreso the second than the first:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Maximum number of packages&lt;/strong&gt;: The number of packages that can be concurrently push.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Maximum threads per packages&lt;/strong&gt;: The number of distribution points that the distribution manager can concurrently push content to.&lt;/p&gt;
&lt;p&gt;The defaults are 3 and 5, so in effect it means you can transfer 3 packages to 5 distribution points concurrently.&lt;/p&gt;
</description>
        </item>
        <item>
        <title>ConfigMgr Hardware Inventory Troubleshooting</title>
        <link>https://adamcook.io/p/configmgr-hardware-inventory-troubleshooting/</link>
        <pubDate>Sun, 28 Oct 2018 00:00:00 +0100</pubDate>
        
        <guid>https://adamcook.io/p/configmgr-hardware-inventory-troubleshooting/</guid>
        <description>&lt;img src="https://adamcook.io/p/configmgr-hardware-inventory-troubleshooting/images/configmgr-hardware-inventory-troubleshooting-01.jpg" alt="Featured image of post ConfigMgr Hardware Inventory Troubleshooting" /&gt;&lt;p&gt;I&amp;rsquo;ve recently updated a site to 1806 and was keen to get all clients up to date too. Some machines targeted for the pre-production client were not upgrading. When I looked closer at one client I suspected client health because a hardware inventory had not been submitted in months.&lt;/p&gt;
&lt;p&gt;Little did I know until recently, a lack of recent hardware inventory data could be a result of other things and client health is least likely to be the root cause. Instead of blindly reinstalling or manually upgrading the client, I wanted to try and understand what&amp;rsquo;s going on.&lt;/p&gt;
&lt;p&gt;If you&amp;rsquo;re concerned about client health look at &lt;a class=&#34;link&#34; href=&#34;https://www.andersrodland.com/configmgr-client-health/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Anders Rodland&amp;rsquo;s ConfigMgr Client Health script&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;There are great articles already out there on this topic, here&amp;rsquo;s some I used to help me with this issue:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://blogs.technet.microsoft.com/scotts-it-blog/2015/04/23/hardware-inventory-in-depth-part-1/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Hardware Inventory â In-Depth (Part 1)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.enhansoft.com/blog/updated-troubleshoot-configmgr-hardware-inventory-issues&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Updated â Troubleshoot ConfigMgr Hardware Inventory Issues&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://blogs.technet.microsoft.com/sudheesn/2010/05/31/troubleshooting-sccm-part-ii-hardware-inventory/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Troubleshooting SCCM ..Part II (Hardware Inventory)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://thesysadminchannel.com/troubleshooting-hardware-inventory-sccm-full-guide/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Solved: Troubleshooting Hardware Inventory in SCCM | Step By Step Guide&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;From the above I understood the problem could be:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Broken WMI repository on the client&lt;/li&gt;
&lt;li&gt;BITS on the client is failing to POST the data to the MP&lt;/li&gt;
&lt;li&gt;The INVENTORY_DATA_LOADER (?) refusing to handle the MIF because perhaps:
&lt;ul&gt;
&lt;li&gt;bad syntax&lt;/li&gt;
&lt;li&gt;mismatch in versions&lt;/li&gt;
&lt;li&gt;too big as it exceeds the MAX FILE SIZE&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;client-side&#34;&gt;Client side&lt;/h2&gt;
&lt;p&gt;First port of call was InventoryAgent.log on the client. This log file records activity on the client about hardware and software inventory processes and heartbeat discovery. At the start of the cycle you will see the log tell us which action its performing and whether it&amp;rsquo;s a full, delta and resync report.&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Action&lt;/th&gt;
&lt;th&gt;Guid&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Hardware inventory&lt;/td&gt;
&lt;td&gt;{00000000-0000-0000-0000-000000000001}&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Software inventory&lt;/td&gt;
&lt;td&gt;{00000000-0000-0000-0000-000000000002}&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Data Discovery Record (DDR)&lt;/td&gt;
&lt;td&gt;{00000000-0000-0000-0000-000000000003}&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;File collection&lt;/td&gt;
&lt;td&gt;{00000000-0000-0000-0000-000000000010}&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-hardware-inventory-troubleshooting/images/configmgr-hardware-inventory-troubleshooting-01.jpg&#34; data-size=&#34;1027x527&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-hardware-inventory-troubleshooting/images/configmgr-hardware-inventory-troubleshooting-01_hub25f78b6c8b4fb440eba083135e45982_98737_480x0_resize_q75_box.jpg 480w, https://adamcook.io/p/configmgr-hardware-inventory-troubleshooting/images/configmgr-hardware-inventory-troubleshooting-01_hub25f78b6c8b4fb440eba083135e45982_98737_1024x0_resize_q75_box.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-hardware-inventory-troubleshooting/images/configmgr-hardware-inventory-troubleshooting-01.jpg&#34; width=&#34;1027&#34; height=&#34;527&#34; loading=&#34;lazy&#34;
				alt=&#34;InventoryAgent.log&#34;&gt;
		&lt;/a&gt;
		
		&lt;figcaption&gt;InventoryAgent.log&lt;/figcaption&gt;
		
	&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Looking at InventoryAgent.log above you can see:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The hardware inventory action took place by looking at the GUID&lt;/li&gt;
&lt;li&gt;The MajorVersion and MinorVersion; MajorVersion increments with everyÂ fullÂ or resyncÂ report and the MinorVersion increments with everyÂ delta report.
&lt;ul&gt;
&lt;li&gt;Full is triggered for the initial report&lt;/li&gt;
&lt;li&gt;Delta is triggered for each hardware inventory after the full&lt;/li&gt;
&lt;li&gt;Resync is triggered when either the client recognises there&amp;rsquo;s a mismatch in report versions when comparing what has previously been executed, or when SMS_INVENTORY_DATA_LOADER compares what the client has sent compared to what&amp;rsquo;s in the site database&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;You can manually trigger a delta by running the Hardware Inventory Cycle in the Control Panel applet, however consider running the below if you want to force a full report. Also consider using &lt;a class=&#34;link&#34; href=&#34;https://recastsoftware.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Recast&amp;rsquo;s Right Click Tools&lt;/a&gt; which gives you this option from the console.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-powershell&#34; data-lang=&#34;powershell&#34;&gt;Get-CimInstance -Namespace &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;root\ccm\invagt&amp;#34;&lt;/span&gt; -ClassName &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;InventoryActionStatus&amp;#34;&lt;/span&gt; | 
    Where-Object { $_.InventoryActionID &lt;span style=&#34;color:#f92672&#34;&gt;-eq&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;{00000000-0000-0000-0000-000000000001}&amp;#34;&lt;/span&gt; } | 
        Remove-CimInstance

$InvokeCimMethodSplat = @{
    ComputerName = $env:COMPUTERNAME
    Namespace = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;root\ccm&amp;#34;&lt;/span&gt;
    Class = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;SMS_Client&amp;#34;&lt;/span&gt;
    Arguments = @{
        TriggerSchedule = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;{00000000-0000-0000-0000-000000000001}&amp;#34;&lt;/span&gt;
    }
}

Invoke-CimMethod @InvokeCimMethodSplat
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Going back to the problem I was troubleshooting&amp;hellip; I was confident WMI was healthy because I could see various areas of WMI being successfully queried and at the end of the cycle I saw &amp;ldquo;Inventory: Successfully sent report. Destination:mp:MP_HinvEndpoint&amp;hellip;&amp;rdquo;. After seeing that, I figured let&amp;rsquo;s look server side.&lt;/p&gt;
&lt;h2 id=&#34;server-side&#34;&gt;Server side&lt;/h2&gt;
&lt;p&gt;The three key areas server side in this scenario are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;SMSINVENTORY_DATA_LOADER - dataldr.log&lt;/li&gt;
&lt;li&gt;Management Point - MP_hinv.log&lt;/li&gt;
&lt;li&gt;IIS -Â C:\inetpub\logs\LogFilesÂ  - This is the default location for IIS logs, if everything else is default, your SCCM IIS logs should be in a sub folder namedÂ W3SVC1. You can find out yourself by looking in IIS Manager.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In all three of the above, I could not see any reference of the machine&amp;rsquo;s name, IP or GUID.&lt;/p&gt;
&lt;h2 id=&#34;back-to-the-client&#34;&gt;Back to the client&lt;/h2&gt;
&lt;p&gt;Looking back at the client, I could see a big queue of BITS job with mixed states: suspended, queued, error and transient_error. You can view the current BITS jobs using the below commands:&lt;/p&gt;
&lt;p&gt;CMD&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;bitsadmin /list /allusers
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;PowerShell&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-powershell&#34; data-lang=&#34;powershell&#34;&gt;Get-BitsTransfer -AllUsers
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Get more information about the reason why they&amp;rsquo;re failing with:&lt;/p&gt;
&lt;p&gt;CMD&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;bitsadmin /info JOBID /verbose
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;PowerShell&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-powershell&#34; data-lang=&#34;powershell&#34;&gt;Get-BitsTransfer -JobId JOBID | Select-Object *
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;To reset all BITS jobs&amp;hellip; You will notice most of the jobs are owned by SYSTEM or NETWORK SERVICE, of which commands you run in any other context will not be successful at purging. A workaround could be to create a scheduled task that runs as SYSTEM to run either of the below:&lt;/p&gt;
&lt;p&gt;CMD&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;bitsadmin /reset /allusers
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;PowerShell&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-powershell&#34; data-lang=&#34;powershell&#34;&gt;Get-BitsTransfer -AllUsers | Remove-BitsTransfer
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;However, an easier way posted byÂ &lt;a class=&#34;link&#34; href=&#34;http://www.scconfigmgr.com/2014/03/28/how-to-reset-bits-transfer-queue/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Nickolaj Andersen&lt;/a&gt; works well:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-cmd&#34; data-lang=&#34;cmd&#34;&gt;net stop BITS 
ipconfig /flushdns 
&lt;span style=&#34;color:#66d9ef&#34;&gt;ren&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;%ALLUSERSPROFILE%&lt;span style=&#34;color:#e6db74&#34;&gt;\Application Data\Microsoft\Network\Downloader\qmgr0.dat&amp;#34;&lt;/span&gt; qmgr0.dat.old 
&lt;span style=&#34;color:#66d9ef&#34;&gt;ren&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;%ALLUSERSPROFILE%&lt;span style=&#34;color:#e6db74&#34;&gt;\Application Data\Microsoft\Network\Downloader\qmgr1.dat&amp;#34;&lt;/span&gt; qmgr1.dat.old
net start BITS
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;For me, my problem was proxy related. I could see error messages referencing timeouts as the issue, I got this by looking at the verbose BITS jobs information.&lt;/p&gt;
&lt;p&gt;After fixing that and clearing all jobs, I triggered another full hardware inventory report and quickly saw the BITS job leave the client with no hang ups.&lt;/p&gt;
&lt;h2 id=&#34;back-to-the-server&#34;&gt;Back to the server&lt;/h2&gt;
&lt;p&gt;Starting off with the IIS logs I saw successful POST from the client, so data uploaded OK.&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-hardware-inventory-troubleshooting/images/configmgr-hardware-inventory-troubleshooting-02.jpg&#34; data-size=&#34;1027x527&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-hardware-inventory-troubleshooting/images/configmgr-hardware-inventory-troubleshooting-02_hu52b2e100e8075b831144081d27c626e5_98611_480x0_resize_q75_box.jpg 480w, https://adamcook.io/p/configmgr-hardware-inventory-troubleshooting/images/configmgr-hardware-inventory-troubleshooting-02_hu52b2e100e8075b831144081d27c626e5_98611_1024x0_resize_q75_box.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-hardware-inventory-troubleshooting/images/configmgr-hardware-inventory-troubleshooting-02.jpg&#34; width=&#34;1027&#34; height=&#34;527&#34; loading=&#34;lazy&#34;
				alt=&#34;IIS log file&#34;&gt;
		&lt;/a&gt;
		
		&lt;figcaption&gt;IIS log file&lt;/figcaption&gt;
		
	&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Next, I want see how the management point handles the report. In the below you can see that it successfully receives it in XML form and parses it into a MIF file, ready to then be parsed by the SMS_INVENTORY_DATA_LOADER and submitted in to the site database. Here, I had no issues.&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-hardware-inventory-troubleshooting/images/configmgr-hardware-inventory-troubleshooting-03.jpg&#34; data-size=&#34;1134x310&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-hardware-inventory-troubleshooting/images/configmgr-hardware-inventory-troubleshooting-03_hu84686cd0fa2de9575617ecd542a88a40_97721_480x0_resize_q75_box.jpg 480w, https://adamcook.io/p/configmgr-hardware-inventory-troubleshooting/images/configmgr-hardware-inventory-troubleshooting-03_hu84686cd0fa2de9575617ecd542a88a40_97721_1024x0_resize_q75_box.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-hardware-inventory-troubleshooting/images/configmgr-hardware-inventory-troubleshooting-03.jpg&#34; width=&#34;1134&#34; height=&#34;310&#34; loading=&#34;lazy&#34;
				alt=&#34;MP_Hinv.log&#34;&gt;
		&lt;/a&gt;
		
		&lt;figcaption&gt;MP_Hinv.log&lt;/figcaption&gt;
		
	&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;However I had issues with SMS_INVENTORY_DATA_LOADER. Nothing too complicated though, the MIF was just too big than the allowed MIF size. I guess where its a mature server, been in production in a while, accumulated a lot of &amp;ldquo;things&amp;rdquo;, as well as whatever additional hardware classes is configured client settings for hardware inventory. And the fact it&amp;rsquo;s a full report.&lt;/p&gt;
&lt;p&gt;The below suggests my maximum allowed size is 1 byte, this was true just for the purpose of creating this screenshot.&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;
		&lt;a href=&#34;https://adamcook.io/p/configmgr-hardware-inventory-troubleshooting/images/configmgr-hardware-inventory-troubleshooting-04.jpg&#34; data-size=&#34;1026x523&#34;&gt;
			&lt;img srcset=&#34;https://adamcook.io/p/configmgr-hardware-inventory-troubleshooting/images/configmgr-hardware-inventory-troubleshooting-04_hu05eb4c3f05d5178c137c278912f7f85f_112329_480x0_resize_q75_box.jpg 480w, https://adamcook.io/p/configmgr-hardware-inventory-troubleshooting/images/configmgr-hardware-inventory-troubleshooting-04_hu05eb4c3f05d5178c137c278912f7f85f_112329_1024x0_resize_q75_box.jpg 1024w&#34;
				src=&#34;https://adamcook.io/p/configmgr-hardware-inventory-troubleshooting/images/configmgr-hardware-inventory-troubleshooting-04.jpg&#34; width=&#34;1026&#34; height=&#34;523&#34; loading=&#34;lazy&#34;
				alt=&#34;dataldr.log&#34;&gt;
		&lt;/a&gt;
		
		&lt;figcaption&gt;dataldr.log&lt;/figcaption&gt;
		
	&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;On the primary site server I increasedÂ &lt;code&gt;HKLM\Software\Microsoft\SMS\Components\SMS_INVENTORY_DATA_LOADER\Max MIF Size&lt;/code&gt;. The decimal value is in bytes so set it to a value at your discretion, your best gauge is see how far over the limit you are by observing the error in dataldr.log and add a little more. Then restart the SMS_INVENTORY_DATA_LOADER component in Configuration Manager Service Manager (Monitoring &amp;gt; Component Status &amp;gt; Right click any component &amp;gt; Start &amp;gt; Configuration Manager Service Manager).&lt;/p&gt;
&lt;p&gt;Then, some time later, the hardware scan timestamp for the device in the console updated and I could see the new data in the device&amp;rsquo;s Resource Manager.&lt;/p&gt;
&lt;p&gt;I felt this was worth writing up because while the links I shared at the start cover most of what I&amp;rsquo;ve written, I wanted to show that BITS is a factor - the other posts don&amp;rsquo;t touch on this - and use it as a note for me in future. You may find you&amp;rsquo;ll only hit one or two of these issues when troubleshooting hardware inventory, unlikely to be all of them in one go like I almost did.&lt;/p&gt;
</description>
        </item>
        
    </channel>
</rss>
